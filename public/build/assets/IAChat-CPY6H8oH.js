/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vn,Un;function Fn(){return{geminiUrl:Vn,vertexUrl:Un}}function kn(o,n,e){var t,r,l;if(!(!((t=o.httpOptions)===null||t===void 0)&&t.baseUrl)){const a=Fn();return o.vertexai?(r=a.vertexUrl)!==null&&r!==void 0?r:n:(l=a.geminiUrl)!==null&&l!==void 0?l:e}return o.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B{}function T(o,n){const e=/\{([^}]+)\}/g;return o.replace(e,(t,r)=>{if(Object.prototype.hasOwnProperty.call(n,r)){const l=n[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(o,n,e){for(let l=0;l<n.length-1;l++){const a=n[l];if(a.endsWith("[]")){const d=a.slice(0,-2);if(!(d in o))if(Array.isArray(e))o[d]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(o[d])){const c=o[d];if(Array.isArray(e))for(let u=0;u<c.length;u++){const f=c[u];s(f,n.slice(l+1),e[u])}else for(const u of c)s(u,n.slice(l+1),e)}return}else if(a.endsWith("[0]")){const d=a.slice(0,-3);d in o||(o[d]=[{}]);const c=o[d];s(c[0],n.slice(l+1),e);return}(!o[a]||typeof o[a]!="object")&&(o[a]={}),o=o[a]}const t=n[n.length-1],r=o[t];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${t}`)}else o[t]=e}function i(o,n){try{if(n.length===1&&n[0]==="_self")return o;for(let e=0;e<n.length;e++){if(typeof o!="object"||o===null)return;const t=n[e];if(t.endsWith("[]")){const r=t.slice(0,-2);if(r in o){const l=o[r];return Array.isArray(l)?l.map(a=>i(a,n.slice(e+1))):void 0}else return}else o=o[t]}return o}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I(o,n){if(!n||typeof n!="string")throw new Error("model is required and must be a string");if(o.isVertexAI()){if(n.startsWith("publishers/")||n.startsWith("projects/")||n.startsWith("models/"))return n;if(n.indexOf("/")>=0){const e=n.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${n}`}else return n.startsWith("models/")||n.startsWith("tunedModels/")?n:`models/${n}`}function Tn(o,n){const e=I(o,n);return e?e.startsWith("publishers/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}`:e.startsWith("models/")&&o.isVertexAI()?`projects/${o.getProject()}/locations/${o.getLocation()}/publishers/google/${e}`:e:""}function yn(o,n){return Array.isArray(n)?n.map(e=>W(o,e)):[W(o,n)]}function W(o,n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Gn(o,n){const e=W(o,n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qn(o,n){const e=W(o,n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pe(o,n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function vn(o,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>pe(o,e)):[pe(o,n)]}function te(o){return o!=null&&typeof o=="object"&&"parts"in o&&Array.isArray(o.parts)}function he(o){return o!=null&&typeof o=="object"&&"functionCall"in o}function ge(o){return o!=null&&typeof o=="object"&&"functionResponse"in o}function P(o,n){if(n==null)throw new Error("ContentUnion is required");return te(n)?n:{role:"user",parts:vn(o,n)}}function En(o,n){if(!n)return[];if(o.isVertexAI()&&Array.isArray(n))return n.flatMap(e=>{const t=P(o,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]});if(o.isVertexAI()){const e=P(o,n);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(n)?n.map(e=>P(o,e)):[P(o,n)]}function w(o,n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(he(n)||ge(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[P(o,n)]}const e=[],t=[],r=te(n[0]);for(const l of n){const a=te(l);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(he(l)||ge(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(l)}}return r||e.push({role:"user",parts:vn(o,t)}),e}function _n(o,n){return n}function Sn(o,n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function X(o,n){return n}function Z(o,n){if(!Array.isArray(n))throw new Error("tool is required and must be an array of Tools");return n}function Bn(o,n,e,t=1){const r=!n.startsWith(`${e}/`)&&n.split("/").length===t;return o.isVertexAI()?n.startsWith("projects/")?n:n.startsWith("locations/")?`projects/${o.getProject()}/${n}`:n.startsWith(`${e}/`)?`projects/${o.getProject()}/locations/${o.getLocation()}/${n}`:r?`projects/${o.getProject()}/locations/${o.getLocation()}/${e}/${n}`:n:r?`${e}/${n}`:n}function D(o,n){if(typeof n!="string")throw new Error("name must be a string");return Bn(o,n,"cachedContents")}function In(o,n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function N(o,n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}function Hn(o){return o!=null&&typeof o=="object"&&"name"in o}function bn(o){return o!=null&&typeof o=="object"&&"video"in o}function $n(o){return o!=null&&typeof o=="object"&&"uri"in o}function An(o,n){var e;let t;if(Hn(n)&&(t=n.name),!($n(n)&&(t=n.uri,t===void 0))&&!(bn(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const l=t.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${t}`);t=l[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Mn(o,n){let e;return o.isVertexAI()?e=n?"publishers/google/models":"models":e=n?"models":"tunedModels",e}function Pn(o,n){for(const e of["models","tunedModels","publisherModels"])if(Jn(n,e))return n[e];return[]}function Jn(o,n){return o!==null&&typeof o=="object"&&n in o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yn(o,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&s(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&s(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&s(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&s(e,["fileData"],a);const d=i(n,["functionCall"]);d!=null&&s(e,["functionCall"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const u=i(n,["inlineData"]);u!=null&&s(e,["inlineData"],u);const f=i(n,["text"]);return f!=null&&s(e,["text"],f),e}function me(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Yn(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function Kn(){return{}}function Wn(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&s(e,["dynamicThreshold"],r),e}function On(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Wn(o,t)),e}function zn(o,n){const e={};if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&s(e,["googleSearch"],Kn());const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],On(o,r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=i(n,["codeExecution"]);l!=null&&s(e,["codeExecution"],l);const a=i(n,["functionDeclarations"]);return a!=null&&s(e,["functionDeclarations"],a),e}function Xn(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&s(e,["allowedFunctionNames"],r),e}function Zn(o,n){const e={},t=i(n,["functionCallingConfig"]);if(t!=null&&s(e,["functionCallingConfig"],Xn(o,t)),i(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return e}function Qn(o,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&s(e,["ttl"],r);const l=i(n,["expireTime"]);e!==void 0&&l!=null&&s(e,["expireTime"],l);const a=i(n,["displayName"]);e!==void 0&&a!=null&&s(e,["displayName"],a);const d=i(n,["contents"]);if(e!==void 0&&d!=null){let p=w(o,d);Array.isArray(p)&&(p=p.map(h=>me(o,h))),s(e,["contents"],p)}const c=i(n,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],me(o,P(o,c)));const u=i(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>zn(o,h))),s(e,["tools"],p)}const f=i(n,["toolConfig"]);return e!==void 0&&f!=null&&s(e,["toolConfig"],Zn(o,f)),t}function jn(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],Tn(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],Qn(o,r,e)),e}function et(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],D(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function nt(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],D(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function tt(o,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&s(e,["ttl"],r);const l=i(n,["expireTime"]);return e!==void 0&&l!=null&&s(e,["expireTime"],l),t}function ot(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],D(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],tt(o,r,e)),e}function it(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),t}function rt(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],it(o,t,e)),e}function st(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&s(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&s(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&s(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&s(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const f=i(n,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ce(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>st(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function lt(){return{}}function at(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&s(e,["dynamicThreshold"],r),e}function ut(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],at(o,t)),e}function dt(){return{}}function ct(o,n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function ft(o,n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],ct(o,t));const r=i(n,["authType"]);r!=null&&s(e,["authType"],r);const l=i(n,["googleServiceAccountConfig"]);l!=null&&s(e,["googleServiceAccountConfig"],l);const a=i(n,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);const d=i(n,["oauthConfig"]);d!=null&&s(e,["oauthConfig"],d);const c=i(n,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function pt(o,n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],ft(o,t)),e}function ht(o,n){const e={},t=i(n,["retrieval"]);t!=null&&s(e,["retrieval"],t),i(n,["googleSearch"])!=null&&s(e,["googleSearch"],lt());const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],ut(o,l)),i(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],dt());const d=i(n,["googleMaps"]);d!=null&&s(e,["googleMaps"],pt(o,d));const c=i(n,["codeExecution"]);c!=null&&s(e,["codeExecution"],c);const u=i(n,["functionDeclarations"]);return u!=null&&s(e,["functionDeclarations"],u),e}function gt(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&s(e,["allowedFunctionNames"],r),e}function mt(o,n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const r=i(n,["longitude"]);return r!=null&&s(e,["longitude"],r),e}function Ct(o,n){const e={},t=i(n,["latLng"]);return t!=null&&s(e,["latLng"],mt(o,t)),e}function Tt(o,n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],gt(o,t));const r=i(n,["retrievalConfig"]);return r!=null&&s(e,["retrievalConfig"],Ct(o,r)),e}function yt(o,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&s(e,["ttl"],r);const l=i(n,["expireTime"]);e!==void 0&&l!=null&&s(e,["expireTime"],l);const a=i(n,["displayName"]);e!==void 0&&a!=null&&s(e,["displayName"],a);const d=i(n,["contents"]);if(e!==void 0&&d!=null){let p=w(o,d);Array.isArray(p)&&(p=p.map(h=>Ce(o,h))),s(e,["contents"],p)}const c=i(n,["systemInstruction"]);e!==void 0&&c!=null&&s(e,["systemInstruction"],Ce(o,P(o,c)));const u=i(n,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(h=>ht(o,h))),s(e,["tools"],p)}const f=i(n,["toolConfig"]);return e!==void 0&&f!=null&&s(e,["toolConfig"],Tt(o,f)),t}function vt(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],Tn(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],yt(o,r,e)),e}function Et(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],D(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function _t(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],D(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function St(o,n,e){const t={},r=i(n,["ttl"]);e!==void 0&&r!=null&&s(e,["ttl"],r);const l=i(n,["expireTime"]);return e!==void 0&&l!=null&&s(e,["expireTime"],l),t}function It(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],D(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],St(o,r,e)),e}function At(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),t}function Mt(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],At(o,t,e)),e}function Y(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["displayName"]);r!=null&&s(e,["displayName"],r);const l=i(n,["model"]);l!=null&&s(e,["model"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["expireTime"]);c!=null&&s(e,["expireTime"],c);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function Pt(){return{}}function Rt(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Y(o,a))),s(e,["cachedContents"],l)}return e}function K(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["displayName"]);r!=null&&s(e,["displayName"],r);const l=i(n,["model"]);l!=null&&s(e,["model"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["expireTime"]);c!=null&&s(e,["expireTime"],c);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function xt(){return{}}function wt(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>K(o,a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var V;(function(o){o.PAGED_ITEM_BATCH_JOBS="batchJobs",o.PAGED_ITEM_MODELS="models",o.PAGED_ITEM_TUNING_JOBS="tuningJobs",o.PAGED_ITEM_FILES="files",o.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(V||(V={}));class Q{constructor(n,e,t,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(n,t,r)}init(n,e,t){var r,l;this.nameInternal=n,this.pageInternal=e[this.nameInternal]||[],this.idxInternal=0;let a={config:{}};t?typeof t=="object"?a=Object.assign({},t):a=t:a={config:{}},a.config&&(a.config.pageToken=e.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(n){this.init(this.nameInternal,n,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(n){return this.pageInternal[n]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const n=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:n,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const n=await this.requestInternal(this.params);return this.initNextPage(n),this.page}hasNextPage(){var n;return((n=this.params.config)===null||n===void 0?void 0:n.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Te;(function(o){o.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",o.OUTCOME_OK="OUTCOME_OK",o.OUTCOME_FAILED="OUTCOME_FAILED",o.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Te||(Te={}));var ye;(function(o){o.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",o.PYTHON="PYTHON"})(ye||(ye={}));var ve;(function(o){o.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",o.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",o.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",o.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",o.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",o.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ve||(ve={}));var Ee;(function(o){o.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",o.SEVERITY="SEVERITY",o.PROBABILITY="PROBABILITY"})(Ee||(Ee={}));var _e;(function(o){o.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE",o.OFF="OFF"})(_e||(_e={}));var Se;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Se||(Se={}));var Ie;(function(o){o.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH"})(Ie||(Ie={}));var Ae;(function(o){o.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",o.STRING="STRING",o.NUMBER="NUMBER",o.INTEGER="INTEGER",o.BOOLEAN="BOOLEAN",o.ARRAY="ARRAY",o.OBJECT="OBJECT"})(Ae||(Ae={}));var Me;(function(o){o.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",o.STOP="STOP",o.MAX_TOKENS="MAX_TOKENS",o.SAFETY="SAFETY",o.RECITATION="RECITATION",o.LANGUAGE="LANGUAGE",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT",o.SPII="SPII",o.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",o.IMAGE_SAFETY="IMAGE_SAFETY"})(Me||(Me={}));var Pe;(function(o){o.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",o.NEGLIGIBLE="NEGLIGIBLE",o.LOW="LOW",o.MEDIUM="MEDIUM",o.HIGH="HIGH"})(Pe||(Pe={}));var Re;(function(o){o.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",o.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",o.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",o.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",o.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Re||(Re={}));var xe;(function(o){o.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",o.SAFETY="SAFETY",o.OTHER="OTHER",o.BLOCKLIST="BLOCKLIST",o.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(xe||(xe={}));var we;(function(o){o.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",o.ON_DEMAND="ON_DEMAND",o.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(we||(we={}));var O;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.AUDIO="AUDIO"})(O||(O={}));var De;(function(o){o.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",o.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",o.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",o.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(De||(De={}));var oe;(function(o){o.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",o.JOB_STATE_QUEUED="JOB_STATE_QUEUED",o.JOB_STATE_PENDING="JOB_STATE_PENDING",o.JOB_STATE_RUNNING="JOB_STATE_RUNNING",o.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",o.JOB_STATE_FAILED="JOB_STATE_FAILED",o.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",o.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",o.JOB_STATE_PAUSED="JOB_STATE_PAUSED",o.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",o.JOB_STATE_UPDATING="JOB_STATE_UPDATING",o.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(oe||(oe={}));var Ne;(function(o){o.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",o.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",o.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",o.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",o.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",o.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",o.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ne||(Ne={}));var Le;(function(o){o.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",o.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",o.BALANCED="BALANCED",o.PRIORITIZE_COST="PRIORITIZE_COST"})(Le||(Le={}));var Ve;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.MODE_DYNAMIC="MODE_DYNAMIC"})(Ve||(Ve={}));var Ue;(function(o){o.MODE_UNSPECIFIED="MODE_UNSPECIFIED",o.AUTO="AUTO",o.ANY="ANY",o.NONE="NONE"})(Ue||(Ue={}));var Fe;(function(o){o.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",o.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",o.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",o.BLOCK_NONE="BLOCK_NONE"})(Fe||(Fe={}));var ke;(function(o){o.DONT_ALLOW="DONT_ALLOW",o.ALLOW_ADULT="ALLOW_ADULT",o.ALLOW_ALL="ALLOW_ALL"})(ke||(ke={}));var Ge;(function(o){o.auto="auto",o.en="en",o.ja="ja",o.ko="ko",o.hi="hi"})(Ge||(Ge={}));var qe;(function(o){o.STATE_UNSPECIFIED="STATE_UNSPECIFIED",o.PROCESSING="PROCESSING",o.ACTIVE="ACTIVE",o.FAILED="FAILED"})(qe||(qe={}));var Be;(function(o){o.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",o.UPLOADED="UPLOADED",o.GENERATED="GENERATED"})(Be||(Be={}));var He;(function(o){o.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",o.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",o.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",o.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",o.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(He||(He={}));var be;(function(o){o.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",o.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",o.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",o.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(be||(be={}));var $e;(function(o){o.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",o.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",o.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",o.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($e||($e={}));var Je;(function(o){o.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",o.TEXT="TEXT",o.IMAGE="IMAGE",o.VIDEO="VIDEO",o.AUDIO="AUDIO",o.DOCUMENT="DOCUMENT"})(Je||(Je={}));var Ye;(function(o){o.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",o.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",o.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ye||(Ye={}));var Ke;(function(o){o.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",o.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",o.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ke||(Ke={}));var We;(function(o){o.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",o.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",o.NO_INTERRUPTION="NO_INTERRUPTION"})(We||(We={}));var Oe;(function(o){o.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",o.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",o.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Oe||(Oe={}));class H{get text(){var n,e,t,r,l,a,d,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const h of(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)!==null&&c!==void 0?c:[]){for(const[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&(m!==null||m!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,u+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var n,e,t,r,l,a,d,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)!==null&&c!==void 0?c:[]){for(const[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var n,e,t,r,l,a,d,c;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var n,e,t,r,l,a,d,c,u;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var n,e,t,r,l,a,d,c,u;if(((r=(t=(e=(n=this.candidates)===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.content)===null||t===void 0?void 0:t.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(d=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class ze{}class Xe{}class Ze{}class Qe{}class je{}class Dt{}class en{}class nn{}class tn{}class Nt{}class ie{constructor(n){const e={};for(const t of n.headers.entries())e[t[0]]=t[1];this.headers=e,this.responseInternal=n}json(){return this.responseInternal.json()}}class Lt{}class Vt{}class Ut{get text(){var n,e,t;let r="",l=!1;const a=[];for(const d of(t=(e=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&t!==void 0?t:[]){for(const[c,u]of Object.entries(d))c!=="text"&&c!=="thought"&&u!==null&&a.push(c);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var n,e,t;let r="";const l=[];for(const a of(t=(e=(n=this.serverContent)===null||n===void 0?void 0:n.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&t!==void 0?t:[]){for(const[d,c]of Object.entries(a))d!=="inlineData"&&c!==null&&l.push(d);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ft extends B{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new Q(V.PAGED_ITEM_CACHED_CONTENTS,t=>this.listInternal(t),await this.listInternal(e),e)}async create(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=vt(this.apiClient,n);return d=T("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>K(this.apiClient,f))}else{const u=jn(this.apiClient,n);return d=T("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Y(this.apiClient,f))}}async get(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Et(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>K(this.apiClient,f))}else{const u=et(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Y(this.apiClient,f))}}async delete(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=_t(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(()=>{const f=xt(),p=new nn;return Object.assign(p,f),p})}else{const u=nt(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Pt(),p=new nn;return Object.assign(p,f),p})}}async update(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=It(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>K(this.apiClient,f))}else{const u=ot(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Y(this.apiClient,f))}}async listInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Mt(this.apiClient,n);return d=T("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=wt(this.apiClient,f),h=new tn;return Object.assign(h,p),h})}else{const u=rt(this.apiClient,n);return d=T("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Rt(this.apiClient,f),h=new tn;return Object.assign(h,p),h})}}}function on(o){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&o[n],t=0;if(e)return e.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&t>=o.length&&(o=void 0),{value:o&&o[t++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(o){return this instanceof M?(this.v=o,this):new M(o)}function z(o,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(o,n||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(m){return Promise.resolve(m).then(g,p)}}function d(g,m){t[g]&&(r[g]=function(C){return new Promise(function(y,E){l.push([g,C,y,E])>1||c(g,C)})},m&&(r[g]=m(r[g])))}function c(g,m){try{u(t[g](m))}catch(C){h(l[0][3],C)}}function u(g){g.value instanceof M?Promise.resolve(g.value.v).then(f,p):h(l[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function h(g,m){g(m),l.shift(),l.length&&c(l[0][0],l[0][1])}}function re(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=o[Symbol.asyncIterator],e;return n?n.call(o):(o=typeof on=="function"?on(o):o[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(l){e[l]=o[l]&&function(a){return new Promise(function(d,c){a=o[l](a),r(d,c,a.done,a.value)})}}function r(l,a,d,c){Promise.resolve(c).then(function(u){l({value:u,done:d})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kt(o){var n;if(o.candidates==null||o.candidates.length===0)return!1;const e=(n=o.candidates[0])===null||n===void 0?void 0:n.content;return e===void 0?!1:Rn(e)}function Rn(o){if(o.parts===void 0||o.parts.length===0)return!1;for(const n of o.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}function Gt(o){if(o.length!==0){if(o[0].role!=="user")throw new Error("History must start with a user turn.");for(const n of o)if(n.role!=="user"&&n.role!=="model")throw new Error(`Role must be user or model, but got ${n.role}.`)}}function qt(o){if(o===void 0||o.length===0)return[];const n=[],e=o.length;let t=0,r=o[0];for(;t<e;)if(o[t].role==="user")r=o[t],t++;else{const l=[];let a=!0;for(;t<e&&o[t].role==="model";)l.push(o[t]),a&&!Rn(o[t])&&(a=!1),t++;a&&(n.push(r),n.push(...l))}return n}class Bt{constructor(n,e){this.modelsModule=n,this.apiClient=e}create(n){return new Ht(this.apiClient,this.modelsModule,n.model,n.config,n.history)}}class Ht{constructor(n,e,t,r={},l=[]){this.apiClient=n,this.modelsModule=e,this.model=t,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Gt(l)}async sendMessage(n){var e;await this.sendPromise;const t=P(this.apiClient,n.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,a;const c=(a=(l=(await r).candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,u=c?[c]:[];this.recordHistory(t,u)})(),await this.sendPromise,r}async sendMessageStream(n){var e;await this.sendPromise;const t=P(this.apiClient,n.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(t),config:(e=n.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,t)}getHistory(n=!1){return n?qt(this.history):this.history}processStreamResponse(n,e){var t,r;return z(this,arguments,function*(){var a,d,c,u;const f=[];try{for(var p=!0,h=re(n),g;g=yield M(h.next()),a=g.done,!a;p=!0){u=g.value,p=!1;const m=u;if(kt(m)){const C=(r=(t=m.candidates)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.content;C!==void 0&&f.push(C)}yield yield M(m)}}catch(m){d={error:m}}finally{try{!p&&!a&&(c=h.return)&&(yield M(c.call(h)))}finally{if(d)throw d.error}}this.recordHistory(e,f)})}recordHistory(n,e){let t=[];e.length>0&&e.every(r=>r.role==="model")?t=e:t.push({role:"model",parts:[]}),this.history.push(n),this.history.push(...t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bt(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);return e!==void 0&&l!=null&&s(e,["_query","pageToken"],l),t}function $t(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],bt(o,t,e)),e}function Jt(o,n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const r=i(n,["message"]);r!=null&&s(e,["message"],r);const l=i(n,["code"]);return l!=null&&s(e,["code"],l),e}function Yt(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["displayName"]);r!=null&&s(e,["displayName"],r);const l=i(n,["mimeType"]);l!=null&&s(e,["mimeType"],l);const a=i(n,["sizeBytes"]);a!=null&&s(e,["sizeBytes"],a);const d=i(n,["createTime"]);d!=null&&s(e,["createTime"],d);const c=i(n,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);const u=i(n,["updateTime"]);u!=null&&s(e,["updateTime"],u);const f=i(n,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const p=i(n,["uri"]);p!=null&&s(e,["uri"],p);const h=i(n,["downloadUri"]);h!=null&&s(e,["downloadUri"],h);const g=i(n,["state"]);g!=null&&s(e,["state"],g);const m=i(n,["source"]);m!=null&&s(e,["source"],m);const C=i(n,["videoMetadata"]);C!=null&&s(e,["videoMetadata"],C);const y=i(n,["error"]);return y!=null&&s(e,["error"],Jt(o,y)),e}function Kt(o,n){const e={},t=i(n,["file"]);t!=null&&s(e,["file"],Yt(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function Wt(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],An(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function Ot(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],An(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function zt(o,n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const r=i(n,["message"]);r!=null&&s(e,["message"],r);const l=i(n,["code"]);return l!=null&&s(e,["code"],l),e}function se(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["displayName"]);r!=null&&s(e,["displayName"],r);const l=i(n,["mimeType"]);l!=null&&s(e,["mimeType"],l);const a=i(n,["sizeBytes"]);a!=null&&s(e,["sizeBytes"],a);const d=i(n,["createTime"]);d!=null&&s(e,["createTime"],d);const c=i(n,["expirationTime"]);c!=null&&s(e,["expirationTime"],c);const u=i(n,["updateTime"]);u!=null&&s(e,["updateTime"],u);const f=i(n,["sha256Hash"]);f!=null&&s(e,["sha256Hash"],f);const p=i(n,["uri"]);p!=null&&s(e,["uri"],p);const h=i(n,["downloadUri"]);h!=null&&s(e,["downloadUri"],h);const g=i(n,["state"]);g!=null&&s(e,["state"],g);const m=i(n,["source"]);m!=null&&s(e,["source"],m);const C=i(n,["videoMetadata"]);C!=null&&s(e,["videoMetadata"],C);const y=i(n,["error"]);return y!=null&&s(e,["error"],zt(o,y)),e}function Xt(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>se(o,a))),s(e,["files"],l)}return e}function Zt(){return{}}function Qt(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jt extends B{constructor(n){super(),this.apiClient=n,this.list=async(e={})=>new Q(V.PAGED_ITEM_FILES,t=>this.listInternal(t),await this.listInternal(e),e)}async upload(n){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(n.file,n.config).then(e=>se(this.apiClient,e))}async download(n){await this.apiClient.downloadFile(n)}async listInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$t(this.apiClient,n);return l=T("files",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(c=>{const u=Xt(this.apiClient,c),f=new Nt;return Object.assign(f,u),f})}}async createInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Kt(this.apiClient,n);return l=T("upload/v1beta/files",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(()=>{const c=Zt(),u=new Lt;return Object.assign(u,c),u})}}async get(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Wt(this.apiClient,n);return l=T("files/{file}",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(c=>se(this.apiClient,c))}}async delete(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ot(this.apiClient,n);return l=T("files/{file}",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(()=>{const c=Qt(),u=new Vt;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eo(o,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&s(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&s(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&s(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&s(e,["fileData"],a);const d=i(n,["functionCall"]);d!=null&&s(e,["functionCall"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const u=i(n,["inlineData"]);u!=null&&s(e,["inlineData"],u);const f=i(n,["text"]);return f!=null&&s(e,["text"],f),e}function no(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&s(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&s(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&s(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&s(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const f=i(n,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function to(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>eo(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function oo(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>no(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function io(){return{}}function ro(){return{}}function so(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&s(e,["dynamicThreshold"],r),e}function lo(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&s(e,["dynamicThreshold"],r),e}function ao(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],so(o,t)),e}function uo(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],lo(o,t)),e}function co(){return{}}function fo(o,n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function po(o,n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],fo(o,t));const r=i(n,["authType"]);r!=null&&s(e,["authType"],r);const l=i(n,["googleServiceAccountConfig"]);l!=null&&s(e,["googleServiceAccountConfig"],l);const a=i(n,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);const d=i(n,["oauthConfig"]);d!=null&&s(e,["oauthConfig"],d);const c=i(n,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function ho(o,n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],po(o,t)),e}function go(o,n){const e={};if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&s(e,["googleSearch"],io());const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ao(o,r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=i(n,["codeExecution"]);l!=null&&s(e,["codeExecution"],l);const a=i(n,["functionDeclarations"]);return a!=null&&s(e,["functionDeclarations"],a),e}function mo(o,n){const e={},t=i(n,["retrieval"]);t!=null&&s(e,["retrieval"],t),i(n,["googleSearch"])!=null&&s(e,["googleSearch"],ro());const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],uo(o,l)),i(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],co());const d=i(n,["googleMaps"]);d!=null&&s(e,["googleMaps"],ho(o,d));const c=i(n,["codeExecution"]);c!=null&&s(e,["codeExecution"],c);const u=i(n,["functionDeclarations"]);return u!=null&&s(e,["functionDeclarations"],u),e}function Co(o,n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function To(o,n){const e={},t=i(n,["handle"]);t!=null&&s(e,["handle"],t);const r=i(n,["transparent"]);return r!=null&&s(e,["transparent"],r),e}function rn(){return{}}function sn(){return{}}function yo(o,n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const r=i(n,["startOfSpeechSensitivity"]);r!=null&&s(e,["startOfSpeechSensitivity"],r);const l=i(n,["endOfSpeechSensitivity"]);l!=null&&s(e,["endOfSpeechSensitivity"],l);const a=i(n,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);const d=i(n,["silenceDurationMs"]);return d!=null&&s(e,["silenceDurationMs"],d),e}function vo(o,n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const r=i(n,["startOfSpeechSensitivity"]);r!=null&&s(e,["startOfSpeechSensitivity"],r);const l=i(n,["endOfSpeechSensitivity"]);l!=null&&s(e,["endOfSpeechSensitivity"],l);const a=i(n,["prefixPaddingMs"]);a!=null&&s(e,["prefixPaddingMs"],a);const d=i(n,["silenceDurationMs"]);return d!=null&&s(e,["silenceDurationMs"],d),e}function Eo(o,n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],yo(o,t));const r=i(n,["activityHandling"]);r!=null&&s(e,["activityHandling"],r);const l=i(n,["turnCoverage"]);return l!=null&&s(e,["turnCoverage"],l),e}function _o(o,n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],vo(o,t));const r=i(n,["activityHandling"]);r!=null&&s(e,["activityHandling"],r);const l=i(n,["turnCoverage"]);return l!=null&&s(e,["turnCoverage"],l),e}function So(o,n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Io(o,n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Ao(o,n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const r=i(n,["slidingWindow"]);return r!=null&&s(e,["slidingWindow"],So(o,r)),e}function Mo(o,n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const r=i(n,["slidingWindow"]);return r!=null&&s(e,["slidingWindow"],Io(o,r)),e}function Po(o,n,e){const t={},r=i(n,["generationConfig"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig"],r);const l=i(n,["responseModalities"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","responseModalities"],l);const a=i(n,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);const d=i(n,["topP"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topP"],d);const c=i(n,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);const u=i(n,["maxOutputTokens"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","maxOutputTokens"],u);const f=i(n,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const p=i(n,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const h=i(n,["speechConfig"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","speechConfig"],h);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],to(o,P(o,g)));const m=i(n,["tools"]);if(e!==void 0&&m!=null){let v=Z(o,m);Array.isArray(v)&&(v=v.map(A=>go(o,X(o,A)))),s(e,["setup","tools"],v)}const C=i(n,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],Co(o,C));const y=i(n,["inputAudioTranscription"]);e!==void 0&&y!=null&&s(e,["setup","inputAudioTranscription"],rn());const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],rn());const _=i(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&s(e,["setup","realtimeInputConfig"],Eo(o,_));const S=i(n,["contextWindowCompression"]);return e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Ao(o,S)),t}function Ro(o,n,e){const t={},r=i(n,["generationConfig"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig"],r);const l=i(n,["responseModalities"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","responseModalities"],l);const a=i(n,["temperature"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","temperature"],a);const d=i(n,["topP"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","topP"],d);const c=i(n,["topK"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","topK"],c);const u=i(n,["maxOutputTokens"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","maxOutputTokens"],u);const f=i(n,["mediaResolution"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","mediaResolution"],f);const p=i(n,["seed"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","seed"],p);const h=i(n,["speechConfig"]);e!==void 0&&h!=null&&s(e,["setup","generationConfig","speechConfig"],h);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],oo(o,P(o,g)));const m=i(n,["tools"]);if(e!==void 0&&m!=null){let v=Z(o,m);Array.isArray(v)&&(v=v.map(A=>mo(o,X(o,A)))),s(e,["setup","tools"],v)}const C=i(n,["sessionResumption"]);e!==void 0&&C!=null&&s(e,["setup","sessionResumption"],To(o,C));const y=i(n,["inputAudioTranscription"]);e!==void 0&&y!=null&&s(e,["setup","inputAudioTranscription"],sn());const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],sn());const _=i(n,["realtimeInputConfig"]);e!==void 0&&_!=null&&s(e,["setup","realtimeInputConfig"],_o(o,_));const S=i(n,["contextWindowCompression"]);return e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Mo(o,S)),t}function xo(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["setup","model"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],Po(o,r,e)),e}function wo(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["setup","model"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],Ro(o,r,e)),e}function Do(){return{}}function No(){return{}}function Lo(){return{}}function Vo(){return{}}function Uo(o,n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],yn(o,t));const r=i(n,["audio"]);r!=null&&s(e,["audio"],qn(o,r));const l=i(n,["audioStreamEnd"]);l!=null&&s(e,["audioStreamEnd"],l);const a=i(n,["video"]);a!=null&&s(e,["video"],Gn(o,a));const d=i(n,["text"]);return d!=null&&s(e,["text"],d),i(n,["activityStart"])!=null&&s(e,["activityStart"],Do()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Lo()),e}function Fo(o,n){const e={},t=i(n,["media"]);if(t!=null&&s(e,["mediaChunks"],yn(o,t)),i(n,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const r=i(n,["audioStreamEnd"]);if(r!=null&&s(e,["audioStreamEnd"],r),i(n,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(i(n,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return i(n,["activityStart"])!=null&&s(e,["activityStart"],No()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Vo()),e}function ko(){return{}}function Go(){return{}}function qo(o,n){const e={},t=i(n,["thought"]);t!=null&&s(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&s(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&s(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&s(e,["fileData"],a);const d=i(n,["functionCall"]);d!=null&&s(e,["functionCall"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const u=i(n,["inlineData"]);u!=null&&s(e,["inlineData"],u);const f=i(n,["text"]);return f!=null&&s(e,["text"],f),e}function Bo(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&s(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&s(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&s(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&s(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const f=i(n,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ho(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>qo(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function bo(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Bo(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function ln(o,n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const r=i(n,["finished"]);return r!=null&&s(e,["finished"],r),e}function an(o,n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const r=i(n,["finished"]);return r!=null&&s(e,["finished"],r),e}function $o(o,n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],Ho(o,t));const r=i(n,["turnComplete"]);r!=null&&s(e,["turnComplete"],r);const l=i(n,["interrupted"]);l!=null&&s(e,["interrupted"],l);const a=i(n,["groundingMetadata"]);a!=null&&s(e,["groundingMetadata"],a);const d=i(n,["generationComplete"]);d!=null&&s(e,["generationComplete"],d);const c=i(n,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],ln(o,c));const u=i(n,["outputTranscription"]);return u!=null&&s(e,["outputTranscription"],ln(o,u)),e}function Jo(o,n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],bo(o,t));const r=i(n,["turnComplete"]);r!=null&&s(e,["turnComplete"],r);const l=i(n,["interrupted"]);l!=null&&s(e,["interrupted"],l);const a=i(n,["groundingMetadata"]);a!=null&&s(e,["groundingMetadata"],a);const d=i(n,["generationComplete"]);d!=null&&s(e,["generationComplete"],d);const c=i(n,["inputTranscription"]);c!=null&&s(e,["inputTranscription"],an(o,c));const u=i(n,["outputTranscription"]);return u!=null&&s(e,["outputTranscription"],an(o,u)),e}function Yo(o,n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const r=i(n,["args"]);r!=null&&s(e,["args"],r);const l=i(n,["name"]);return l!=null&&s(e,["name"],l),e}function Ko(o,n){const e={},t=i(n,["args"]);t!=null&&s(e,["args"],t);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Wo(o,n){const e={},t=i(n,["functionCalls"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Yo(o,l))),s(e,["functionCalls"],r)}return e}function Oo(o,n){const e={},t=i(n,["functionCalls"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ko(o,l))),s(e,["functionCalls"],r)}return e}function zo(o,n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function Xo(o,n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function b(o,n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const r=i(n,["tokenCount"]);return r!=null&&s(e,["tokenCount"],r),e}function J(o,n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const r=i(n,["tokenCount"]);return r!=null&&s(e,["tokenCount"],r),e}function Zo(o,n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const r=i(n,["cachedContentTokenCount"]);r!=null&&s(e,["cachedContentTokenCount"],r);const l=i(n,["responseTokenCount"]);l!=null&&s(e,["responseTokenCount"],l);const a=i(n,["toolUsePromptTokenCount"]);a!=null&&s(e,["toolUsePromptTokenCount"],a);const d=i(n,["thoughtsTokenCount"]);d!=null&&s(e,["thoughtsTokenCount"],d);const c=i(n,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);const u=i(n,["promptTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>b(o,m))),s(e,["promptTokensDetails"],g)}const f=i(n,["cacheTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(m=>b(o,m))),s(e,["cacheTokensDetails"],g)}const p=i(n,["responseTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>b(o,m))),s(e,["responseTokensDetails"],g)}const h=i(n,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(m=>b(o,m))),s(e,["toolUsePromptTokensDetails"],g)}return e}function Qo(o,n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const r=i(n,["cachedContentTokenCount"]);r!=null&&s(e,["cachedContentTokenCount"],r);const l=i(n,["candidatesTokenCount"]);l!=null&&s(e,["responseTokenCount"],l);const a=i(n,["toolUsePromptTokenCount"]);a!=null&&s(e,["toolUsePromptTokenCount"],a);const d=i(n,["thoughtsTokenCount"]);d!=null&&s(e,["thoughtsTokenCount"],d);const c=i(n,["totalTokenCount"]);c!=null&&s(e,["totalTokenCount"],c);const u=i(n,["promptTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(C=>J(o,C))),s(e,["promptTokensDetails"],m)}const f=i(n,["cacheTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(C=>J(o,C))),s(e,["cacheTokensDetails"],m)}const p=i(n,["candidatesTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(C=>J(o,C))),s(e,["responseTokensDetails"],m)}const h=i(n,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(C=>J(o,C))),s(e,["toolUsePromptTokensDetails"],m)}const g=i(n,["trafficType"]);return g!=null&&s(e,["trafficType"],g),e}function jo(o,n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function ei(o,n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function ni(o,n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const r=i(n,["resumable"]);r!=null&&s(e,["resumable"],r);const l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&s(e,["lastConsumedClientMessageIndex"],l),e}function ti(o,n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const r=i(n,["resumable"]);r!=null&&s(e,["resumable"],r);const l=i(n,["lastConsumedClientMessageIndex"]);return l!=null&&s(e,["lastConsumedClientMessageIndex"],l),e}function oi(o,n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],ko());const r=i(n,["serverContent"]);r!=null&&s(e,["serverContent"],$o(o,r));const l=i(n,["toolCall"]);l!=null&&s(e,["toolCall"],Wo(o,l));const a=i(n,["toolCallCancellation"]);a!=null&&s(e,["toolCallCancellation"],zo(o,a));const d=i(n,["usageMetadata"]);d!=null&&s(e,["usageMetadata"],Zo(o,d));const c=i(n,["goAway"]);c!=null&&s(e,["goAway"],jo(o,c));const u=i(n,["sessionResumptionUpdate"]);return u!=null&&s(e,["sessionResumptionUpdate"],ni(o,u)),e}function ii(o,n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Go());const r=i(n,["serverContent"]);r!=null&&s(e,["serverContent"],Jo(o,r));const l=i(n,["toolCall"]);l!=null&&s(e,["toolCall"],Oo(o,l));const a=i(n,["toolCallCancellation"]);a!=null&&s(e,["toolCallCancellation"],Xo(o,a));const d=i(n,["usageMetadata"]);d!=null&&s(e,["usageMetadata"],Qo(o,d));const c=i(n,["goAway"]);c!=null&&s(e,["goAway"],ei(o,c));const u=i(n,["sessionResumptionUpdate"]);return u!=null&&s(e,["sessionResumptionUpdate"],ti(o,u)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ri(o,n){const e={};if(i(n,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const t=i(n,["thought"]);t!=null&&s(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&s(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&s(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&s(e,["fileData"],a);const d=i(n,["functionCall"]);d!=null&&s(e,["functionCall"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const u=i(n,["inlineData"]);u!=null&&s(e,["inlineData"],u);const f=i(n,["text"]);return f!=null&&s(e,["text"],f),e}function j(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>ri(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function si(o,n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const r=i(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function li(){return{}}function ai(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&s(e,["dynamicThreshold"],r),e}function ui(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ai(o,t)),e}function di(o,n){const e={};if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");i(n,["googleSearch"])!=null&&s(e,["googleSearch"],li());const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ui(o,r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");const l=i(n,["codeExecution"]);l!=null&&s(e,["codeExecution"],l);const a=i(n,["functionDeclarations"]);return a!=null&&s(e,["functionDeclarations"],a),e}function ci(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&s(e,["allowedFunctionNames"],r),e}function fi(o,n){const e={},t=i(n,["functionCallingConfig"]);if(t!=null&&s(e,["functionCallingConfig"],ci(o,t)),i(n,["retrievalConfig"])!==void 0)throw new Error("retrievalConfig parameter is not supported in Gemini API.");return e}function pi(o,n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function hi(o,n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],pi(o,t)),e}function gi(o,n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],hi(o,t));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function mi(o,n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const r=i(n,["thinkingBudget"]);return r!=null&&s(e,["thinkingBudget"],r),e}function Ci(o,n,e){const t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&s(e,["systemInstruction"],j(o,P(o,r)));const l=i(n,["temperature"]);l!=null&&s(t,["temperature"],l);const a=i(n,["topP"]);a!=null&&s(t,["topP"],a);const d=i(n,["topK"]);d!=null&&s(t,["topK"],d);const c=i(n,["candidateCount"]);c!=null&&s(t,["candidateCount"],c);const u=i(n,["maxOutputTokens"]);u!=null&&s(t,["maxOutputTokens"],u);const f=i(n,["stopSequences"]);f!=null&&s(t,["stopSequences"],f);const p=i(n,["responseLogprobs"]);p!=null&&s(t,["responseLogprobs"],p);const h=i(n,["logprobs"]);h!=null&&s(t,["logprobs"],h);const g=i(n,["presencePenalty"]);g!=null&&s(t,["presencePenalty"],g);const m=i(n,["frequencyPenalty"]);m!=null&&s(t,["frequencyPenalty"],m);const C=i(n,["seed"]);C!=null&&s(t,["seed"],C);const y=i(n,["responseMimeType"]);y!=null&&s(t,["responseMimeType"],y);const E=i(n,["responseSchema"]);if(E!=null&&s(t,["responseSchema"],_n(o,E)),i(n,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(n,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=i(n,["safetySettings"]);if(e!==void 0&&_!=null){let R=_;Array.isArray(R)&&(R=R.map(L=>si(o,L))),s(e,["safetySettings"],R)}const S=i(n,["tools"]);if(e!==void 0&&S!=null){let R=Z(o,S);Array.isArray(R)&&(R=R.map(L=>di(o,X(o,L)))),s(e,["tools"],R)}const v=i(n,["toolConfig"]);if(e!==void 0&&v!=null&&s(e,["toolConfig"],fi(o,v)),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=i(n,["cachedContent"]);e!==void 0&&A!=null&&s(e,["cachedContent"],D(o,A));const F=i(n,["responseModalities"]);F!=null&&s(t,["responseModalities"],F);const k=i(n,["mediaResolution"]);k!=null&&s(t,["mediaResolution"],k);const G=i(n,["speechConfig"]);if(G!=null&&s(t,["speechConfig"],gi(o,Sn(o,G))),i(n,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=i(n,["thinkingConfig"]);return q!=null&&s(t,["thinkingConfig"],mi(o,q)),t}function un(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);if(r!=null){let a=w(o,r);Array.isArray(a)&&(a=a.map(d=>j(o,d))),s(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&s(e,["generationConfig"],Ci(o,l,e)),e}function Ti(o,n,e){const t={},r=i(n,["taskType"]);e!==void 0&&r!=null&&s(e,["requests[]","taskType"],r);const l=i(n,["title"]);e!==void 0&&l!=null&&s(e,["requests[]","title"],l);const a=i(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&s(e,["requests[]","outputDimensionality"],a),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function yi(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);r!=null&&s(e,["requests[]","content"],En(o,r));const l=i(n,["config"]);l!=null&&s(e,["config"],Ti(o,l,e));const a=i(n,["model"]);return a!==void 0&&s(e,["requests[]","model"],I(o,a)),e}function vi(o,n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=i(n,["numberOfImages"]);e!==void 0&&r!=null&&s(e,["parameters","sampleCount"],r);const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["guidanceScale"]);if(e!==void 0&&a!=null&&s(e,["parameters","guidanceScale"],a),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const u=i(n,["includeSafetyAttributes"]);e!==void 0&&u!=null&&s(e,["parameters","includeSafetyAttributes"],u);const f=i(n,["includeRaiReason"]);e!==void 0&&f!=null&&s(e,["parameters","includeRaiReason"],f);const p=i(n,["language"]);e!==void 0&&p!=null&&s(e,["parameters","language"],p);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const g=i(n,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&s(e,["parameters","outputOptions","compressionQuality"],g),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Ei(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["prompt"]);r!=null&&s(e,["instances[0]","prompt"],r);const l=i(n,["config"]);return l!=null&&s(e,["config"],vi(o,l,e)),e}function _i(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","name"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function Si(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);e!==void 0&&a!=null&&s(e,["_query","filter"],a);const d=i(n,["queryBase"]);return e!==void 0&&d!=null&&s(e,["_url","models_url"],Mn(o,d)),t}function Ii(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Si(o,t,e)),e}function Ai(o,n,e){const t={},r=i(n,["displayName"]);e!==void 0&&r!=null&&s(e,["displayName"],r);const l=i(n,["description"]);return e!==void 0&&l!=null&&s(e,["description"],l),t}function Mi(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","name"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],Ai(o,r,e)),e}function Pi(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","name"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function Ri(o,n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xi(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);if(r!=null){let a=w(o,r);Array.isArray(a)&&(a=a.map(d=>j(o,d))),s(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&s(e,["config"],Ri(o,l)),e}function wi(o,n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],N(o,t));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Di(o,n,e){const t={},r=i(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&s(e,["parameters","sampleCount"],r),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=i(n,["durationSeconds"]);if(e!==void 0&&l!=null&&s(e,["parameters","durationSeconds"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["aspectRatio"]);if(e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a),i(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=i(n,["personGeneration"]);if(e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=i(n,["negativePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","negativePrompt"],c),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Ni(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["prompt"]);r!=null&&s(e,["instances[0]","prompt"],r);const l=i(n,["image"]);l!=null&&s(e,["instances[0]","image"],wi(o,l));const a=i(n,["config"]);return a!=null&&s(e,["config"],Di(o,a,e)),e}function Li(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&s(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&s(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&s(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&s(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const f=i(n,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function U(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Li(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function Vi(o,n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function Ui(o,n){const e={},t=i(n,["method"]);t!=null&&s(e,["method"],t);const r=i(n,["category"]);r!=null&&s(e,["category"],r);const l=i(n,["threshold"]);return l!=null&&s(e,["threshold"],l),e}function Fi(){return{}}function ki(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["dynamicThreshold"]);return r!=null&&s(e,["dynamicThreshold"],r),e}function Gi(o,n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ki(o,t)),e}function qi(){return{}}function Bi(o,n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Hi(o,n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Bi(o,t));const r=i(n,["authType"]);r!=null&&s(e,["authType"],r);const l=i(n,["googleServiceAccountConfig"]);l!=null&&s(e,["googleServiceAccountConfig"],l);const a=i(n,["httpBasicAuthConfig"]);a!=null&&s(e,["httpBasicAuthConfig"],a);const d=i(n,["oauthConfig"]);d!=null&&s(e,["oauthConfig"],d);const c=i(n,["oidcConfig"]);return c!=null&&s(e,["oidcConfig"],c),e}function bi(o,n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Hi(o,t)),e}function xn(o,n){const e={},t=i(n,["retrieval"]);t!=null&&s(e,["retrieval"],t),i(n,["googleSearch"])!=null&&s(e,["googleSearch"],Fi());const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Gi(o,l)),i(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],qi());const d=i(n,["googleMaps"]);d!=null&&s(e,["googleMaps"],bi(o,d));const c=i(n,["codeExecution"]);c!=null&&s(e,["codeExecution"],c);const u=i(n,["functionDeclarations"]);return u!=null&&s(e,["functionDeclarations"],u),e}function $i(o,n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const r=i(n,["allowedFunctionNames"]);return r!=null&&s(e,["allowedFunctionNames"],r),e}function Ji(o,n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const r=i(n,["longitude"]);return r!=null&&s(e,["longitude"],r),e}function Yi(o,n){const e={},t=i(n,["latLng"]);return t!=null&&s(e,["latLng"],Ji(o,t)),e}function Ki(o,n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],$i(o,t));const r=i(n,["retrievalConfig"]);return r!=null&&s(e,["retrievalConfig"],Yi(o,r)),e}function Wi(o,n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Oi(o,n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Wi(o,t)),e}function zi(o,n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Oi(o,t));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Xi(o,n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const r=i(n,["thinkingBudget"]);return r!=null&&s(e,["thinkingBudget"],r),e}function Zi(o,n,e){const t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&s(e,["systemInstruction"],U(o,P(o,r)));const l=i(n,["temperature"]);l!=null&&s(t,["temperature"],l);const a=i(n,["topP"]);a!=null&&s(t,["topP"],a);const d=i(n,["topK"]);d!=null&&s(t,["topK"],d);const c=i(n,["candidateCount"]);c!=null&&s(t,["candidateCount"],c);const u=i(n,["maxOutputTokens"]);u!=null&&s(t,["maxOutputTokens"],u);const f=i(n,["stopSequences"]);f!=null&&s(t,["stopSequences"],f);const p=i(n,["responseLogprobs"]);p!=null&&s(t,["responseLogprobs"],p);const h=i(n,["logprobs"]);h!=null&&s(t,["logprobs"],h);const g=i(n,["presencePenalty"]);g!=null&&s(t,["presencePenalty"],g);const m=i(n,["frequencyPenalty"]);m!=null&&s(t,["frequencyPenalty"],m);const C=i(n,["seed"]);C!=null&&s(t,["seed"],C);const y=i(n,["responseMimeType"]);y!=null&&s(t,["responseMimeType"],y);const E=i(n,["responseSchema"]);E!=null&&s(t,["responseSchema"],_n(o,E));const _=i(n,["routingConfig"]);_!=null&&s(t,["routingConfig"],_);const S=i(n,["modelSelectionConfig"]);S!=null&&s(t,["modelConfig"],Vi(o,S));const v=i(n,["safetySettings"]);if(e!==void 0&&v!=null){let x=v;Array.isArray(x)&&(x=x.map(ee=>Ui(o,ee))),s(e,["safetySettings"],x)}const A=i(n,["tools"]);if(e!==void 0&&A!=null){let x=Z(o,A);Array.isArray(x)&&(x=x.map(ee=>xn(o,X(o,ee)))),s(e,["tools"],x)}const F=i(n,["toolConfig"]);e!==void 0&&F!=null&&s(e,["toolConfig"],Ki(o,F));const k=i(n,["labels"]);e!==void 0&&k!=null&&s(e,["labels"],k);const G=i(n,["cachedContent"]);e!==void 0&&G!=null&&s(e,["cachedContent"],D(o,G));const q=i(n,["responseModalities"]);q!=null&&s(t,["responseModalities"],q);const R=i(n,["mediaResolution"]);R!=null&&s(t,["mediaResolution"],R);const L=i(n,["speechConfig"]);L!=null&&s(t,["speechConfig"],zi(o,Sn(o,L)));const ce=i(n,["audioTimestamp"]);ce!=null&&s(t,["audioTimestamp"],ce);const fe=i(n,["thinkingConfig"]);return fe!=null&&s(t,["thinkingConfig"],Xi(o,fe)),t}function dn(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);if(r!=null){let a=w(o,r);Array.isArray(a)&&(a=a.map(d=>U(o,d))),s(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&s(e,["generationConfig"],Zi(o,l,e)),e}function Qi(o,n,e){const t={},r=i(n,["taskType"]);e!==void 0&&r!=null&&s(e,["instances[]","task_type"],r);const l=i(n,["title"]);e!==void 0&&l!=null&&s(e,["instances[]","title"],l);const a=i(n,["outputDimensionality"]);e!==void 0&&a!=null&&s(e,["parameters","outputDimensionality"],a);const d=i(n,["mimeType"]);e!==void 0&&d!=null&&s(e,["instances[]","mimeType"],d);const c=i(n,["autoTruncate"]);return e!==void 0&&c!=null&&s(e,["parameters","autoTruncate"],c),t}function ji(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);r!=null&&s(e,["instances[]","content"],En(o,r));const l=i(n,["config"]);return l!=null&&s(e,["config"],Qi(o,l,e)),e}function er(o,n,e){const t={},r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["negativePrompt"]);e!==void 0&&l!=null&&s(e,["parameters","negativePrompt"],l);const a=i(n,["numberOfImages"]);e!==void 0&&a!=null&&s(e,["parameters","sampleCount"],a);const d=i(n,["aspectRatio"]);e!==void 0&&d!=null&&s(e,["parameters","aspectRatio"],d);const c=i(n,["guidanceScale"]);e!==void 0&&c!=null&&s(e,["parameters","guidanceScale"],c);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const f=i(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const h=i(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&s(e,["parameters","includeSafetyAttributes"],h);const g=i(n,["includeRaiReason"]);e!==void 0&&g!=null&&s(e,["parameters","includeRaiReason"],g);const m=i(n,["language"]);e!==void 0&&m!=null&&s(e,["parameters","language"],m);const C=i(n,["outputMimeType"]);e!==void 0&&C!=null&&s(e,["parameters","outputOptions","mimeType"],C);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const E=i(n,["addWatermark"]);e!==void 0&&E!=null&&s(e,["parameters","addWatermark"],E);const _=i(n,["enhancePrompt"]);return e!==void 0&&_!=null&&s(e,["parameters","enhancePrompt"],_),t}function nr(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["prompt"]);r!=null&&s(e,["instances[0]","prompt"],r);const l=i(n,["config"]);return l!=null&&s(e,["config"],er(o,l,e)),e}function tr(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","name"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function or(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);e!==void 0&&a!=null&&s(e,["_query","filter"],a);const d=i(n,["queryBase"]);return e!==void 0&&d!=null&&s(e,["_url","models_url"],Mn(o,d)),t}function ir(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],or(o,t,e)),e}function rr(o,n,e){const t={},r=i(n,["displayName"]);e!==void 0&&r!=null&&s(e,["displayName"],r);const l=i(n,["description"]);return e!==void 0&&l!=null&&s(e,["description"],l),t}function sr(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],rr(o,r,e)),e}function lr(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","name"],I(o,t));const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function ar(o,n,e){const t={},r=i(n,["systemInstruction"]);e!==void 0&&r!=null&&s(e,["systemInstruction"],U(o,P(o,r)));const l=i(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(c=>xn(o,c))),s(e,["tools"],d)}const a=i(n,["generationConfig"]);return e!==void 0&&a!=null&&s(e,["generationConfig"],a),t}function ur(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);if(r!=null){let a=w(o,r);Array.isArray(a)&&(a=a.map(d=>U(o,d))),s(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&s(e,["config"],ar(o,l,e)),e}function dr(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["contents"]);if(r!=null){let a=w(o,r);Array.isArray(a)&&(a=a.map(d=>U(o,d))),s(e,["contents"],a)}const l=i(n,["config"]);return l!=null&&s(e,["config"],l),e}function cr(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const r=i(n,["imageBytes"]);r!=null&&s(e,["bytesBase64Encoded"],N(o,r));const l=i(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function fr(o,n,e){const t={},r=i(n,["numberOfVideos"]);e!==void 0&&r!=null&&s(e,["parameters","sampleCount"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["fps"]);e!==void 0&&a!=null&&s(e,["parameters","fps"],a);const d=i(n,["durationSeconds"]);e!==void 0&&d!=null&&s(e,["parameters","durationSeconds"],d);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=i(n,["aspectRatio"]);e!==void 0&&u!=null&&s(e,["parameters","aspectRatio"],u);const f=i(n,["resolution"]);e!==void 0&&f!=null&&s(e,["parameters","resolution"],f);const p=i(n,["personGeneration"]);e!==void 0&&p!=null&&s(e,["parameters","personGeneration"],p);const h=i(n,["pubsubTopic"]);e!==void 0&&h!=null&&s(e,["parameters","pubsubTopic"],h);const g=i(n,["negativePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","negativePrompt"],g);const m=i(n,["enhancePrompt"]);return e!==void 0&&m!=null&&s(e,["parameters","enhancePrompt"],m),t}function pr(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["_url","model"],I(o,t));const r=i(n,["prompt"]);r!=null&&s(e,["instances[0]","prompt"],r);const l=i(n,["image"]);l!=null&&s(e,["instances[0]","image"],cr(o,l));const a=i(n,["config"]);return a!=null&&s(e,["config"],fr(o,a,e)),e}function hr(o,n){const e={},t=i(n,["thought"]);t!=null&&s(e,["thought"],t);const r=i(n,["codeExecutionResult"]);r!=null&&s(e,["codeExecutionResult"],r);const l=i(n,["executableCode"]);l!=null&&s(e,["executableCode"],l);const a=i(n,["fileData"]);a!=null&&s(e,["fileData"],a);const d=i(n,["functionCall"]);d!=null&&s(e,["functionCall"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const u=i(n,["inlineData"]);u!=null&&s(e,["inlineData"],u);const f=i(n,["text"]);return f!=null&&s(e,["text"],f),e}function gr(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>hr(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function mr(o,n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Cr(o,n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],gr(o,t));const r=i(n,["citationMetadata"]);r!=null&&s(e,["citationMetadata"],mr(o,r));const l=i(n,["tokenCount"]);l!=null&&s(e,["tokenCount"],l);const a=i(n,["finishReason"]);a!=null&&s(e,["finishReason"],a);const d=i(n,["avgLogprobs"]);d!=null&&s(e,["avgLogprobs"],d);const c=i(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&s(e,["index"],u);const f=i(n,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function cn(o,n){const e={},t=i(n,["candidates"]);if(t!=null){let d=t;Array.isArray(d)&&(d=d.map(c=>Cr(o,c))),s(e,["candidates"],d)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["usageMetadata"]);return a!=null&&s(e,["usageMetadata"],a),e}function Tr(o,n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function yr(){return{}}function vr(o,n){const e={},t=i(n,["embeddings"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Tr(o,a))),s(e,["embeddings"],l)}return i(n,["metadata"])!=null&&s(e,["metadata"],yr()),e}function Er(o,n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],N(o,t));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function wn(o,n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const r=i(n,["safetyAttributes","scores"]);r!=null&&s(e,["scores"],r);const l=i(n,["contentType"]);return l!=null&&s(e,["contentType"],l),e}function _r(o,n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Er(o,t));const r=i(n,["raiFilteredReason"]);r!=null&&s(e,["raiFilteredReason"],r);const l=i(n,["_self"]);return l!=null&&s(e,["safetyAttributes"],wn(o,l)),e}function Sr(o,n){const e={},t=i(n,["predictions"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>_r(o,a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],wn(o,r)),e}function Ir(o,n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["updateTime"]);return l!=null&&s(e,["updateTime"],l),e}function le(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["displayName"]);r!=null&&s(e,["displayName"],r);const l=i(n,["description"]);l!=null&&s(e,["description"],l);const a=i(n,["version"]);a!=null&&s(e,["version"],a);const d=i(n,["_self"]);d!=null&&s(e,["tunedModelInfo"],Ir(o,d));const c=i(n,["inputTokenLimit"]);c!=null&&s(e,["inputTokenLimit"],c);const u=i(n,["outputTokenLimit"]);u!=null&&s(e,["outputTokenLimit"],u);const f=i(n,["supportedGenerationMethods"]);return f!=null&&s(e,["supportedActions"],f),e}function Ar(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["_self"]);if(r!=null){let l=Pn(o,r);Array.isArray(l)&&(l=l.map(a=>le(o,a))),s(e,["models"],l)}return e}function Mr(){return{}}function Pr(o,n){const e={},t=i(n,["totalTokens"]);t!=null&&s(e,["totalTokens"],t);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function Rr(o,n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const r=i(n,["video","encodedVideo"]);r!=null&&s(e,["videoBytes"],N(o,r));const l=i(n,["encoding"]);return l!=null&&s(e,["mimeType"],l),e}function xr(o,n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Rr(o,t)),e}function wr(o,n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>xr(o,d))),s(e,["generatedVideos"],a)}const r=i(n,["raiMediaFilteredCount"]);r!=null&&s(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function Dr(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);a!=null&&s(e,["error"],a);const d=i(n,["response","generateVideoResponse"]);return d!=null&&s(e,["response"],wr(o,d)),e}function Nr(o,n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],t);const r=i(n,["thought"]);r!=null&&s(e,["thought"],r);const l=i(n,["codeExecutionResult"]);l!=null&&s(e,["codeExecutionResult"],l);const a=i(n,["executableCode"]);a!=null&&s(e,["executableCode"],a);const d=i(n,["fileData"]);d!=null&&s(e,["fileData"],d);const c=i(n,["functionCall"]);c!=null&&s(e,["functionCall"],c);const u=i(n,["functionResponse"]);u!=null&&s(e,["functionResponse"],u);const f=i(n,["inlineData"]);f!=null&&s(e,["inlineData"],f);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Lr(o,n){const e={},t=i(n,["parts"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Nr(o,a))),s(e,["parts"],l)}const r=i(n,["role"]);return r!=null&&s(e,["role"],r),e}function Vr(o,n){const e={},t=i(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Ur(o,n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Lr(o,t));const r=i(n,["citationMetadata"]);r!=null&&s(e,["citationMetadata"],Vr(o,r));const l=i(n,["finishMessage"]);l!=null&&s(e,["finishMessage"],l);const a=i(n,["finishReason"]);a!=null&&s(e,["finishReason"],a);const d=i(n,["avgLogprobs"]);d!=null&&s(e,["avgLogprobs"],d);const c=i(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&s(e,["index"],u);const f=i(n,["logprobsResult"]);f!=null&&s(e,["logprobsResult"],f);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function fn(o,n){const e={},t=i(n,["candidates"]);if(t!=null){let u=t;Array.isArray(u)&&(u=u.map(f=>Ur(o,f))),s(e,["candidates"],u)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["responseId"]);l!=null&&s(e,["responseId"],l);const a=i(n,["modelVersion"]);a!=null&&s(e,["modelVersion"],a);const d=i(n,["promptFeedback"]);d!=null&&s(e,["promptFeedback"],d);const c=i(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Fr(o,n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const r=i(n,["token_count"]);return r!=null&&s(e,["tokenCount"],r),e}function kr(o,n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const r=i(n,["statistics"]);return r!=null&&s(e,["statistics"],Fr(o,r)),e}function Gr(o,n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function qr(o,n){const e={},t=i(n,["predictions[]","embeddings"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>kr(o,a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],Gr(o,r)),e}function Br(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const r=i(n,["bytesBase64Encoded"]);r!=null&&s(e,["imageBytes"],N(o,r));const l=i(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Dn(o,n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const r=i(n,["safetyAttributes","scores"]);r!=null&&s(e,["scores"],r);const l=i(n,["contentType"]);return l!=null&&s(e,["contentType"],l),e}function Hr(o,n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Br(o,t));const r=i(n,["raiFilteredReason"]);r!=null&&s(e,["raiFilteredReason"],r);const l=i(n,["_self"]);l!=null&&s(e,["safetyAttributes"],Dn(o,l));const a=i(n,["prompt"]);return a!=null&&s(e,["enhancedPrompt"],a),e}function br(o,n){const e={},t=i(n,["predictions"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Hr(o,a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],Dn(o,r)),e}function $r(o,n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const r=i(n,["deployedModelId"]);return r!=null&&s(e,["deployedModelId"],r),e}function Jr(o,n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["updateTime"]);return l!=null&&s(e,["updateTime"],l),e}function ae(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["displayName"]);r!=null&&s(e,["displayName"],r);const l=i(n,["description"]);l!=null&&s(e,["description"],l);const a=i(n,["versionId"]);a!=null&&s(e,["version"],a);const d=i(n,["deployedModels"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(p=>$r(o,p))),s(e,["endpoints"],f)}const c=i(n,["labels"]);c!=null&&s(e,["labels"],c);const u=i(n,["_self"]);return u!=null&&s(e,["tunedModelInfo"],Jr(o,u)),e}function Yr(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["_self"]);if(r!=null){let l=Pn(o,r);Array.isArray(l)&&(l=l.map(a=>ae(o,a))),s(e,["models"],l)}return e}function Kr(){return{}}function Wr(o,n){const e={},t=i(n,["totalTokens"]);return t!=null&&s(e,["totalTokens"],t),e}function Or(o,n){const e={},t=i(n,["tokensInfo"]);return t!=null&&s(e,["tokensInfo"],t),e}function zr(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const r=i(n,["bytesBase64Encoded"]);r!=null&&s(e,["videoBytes"],N(o,r));const l=i(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function Xr(o,n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],zr(o,t)),e}function Zr(o,n){const e={},t=i(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>Xr(o,d))),s(e,["generatedVideos"],a)}const r=i(n,["raiMediaFilteredCount"]);r!=null&&s(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function Qr(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);a!=null&&s(e,["error"],a);const d=i(n,["response"]);return d!=null&&s(e,["response"],Zr(o,d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jr="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function es(o,n,e){const t=new Ut;let r;if(e.data instanceof Blob?r=JSON.parse(await e.data.text()):r=JSON.parse(e.data),o.isVertexAI()){const l=ii(o,r);Object.assign(t,l)}else{const l=oi(o,r);Object.assign(t,l)}n(t)}class ns{constructor(n,e,t){this.apiClient=n,this.auth=e,this.webSocketFactory=t}async connect(n){var e,t,r,l;const a=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let c;const u=rs(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())c=`${a}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const v=this.apiClient.getApiKey();c=`${a}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateContent?key=${v}`}let f=()=>{};const p=new Promise(v=>{f=v}),h=n.callbacks,g=function(){var v;(v=h==null?void 0:h.onopen)===null||v===void 0||v.call(h),f({})},m=this.apiClient,C={onopen:g,onmessage:v=>{es(m,h.onmessage,v)},onerror:(e=h==null?void 0:h.onerror)!==null&&e!==void 0?e:function(v){},onclose:(t=h==null?void 0:h.onclose)!==null&&t!==void 0?t:function(v){}},y=this.webSocketFactory.create(c,is(u),C);y.connect(),await p;let E=I(this.apiClient,n.model);if(this.apiClient.isVertexAI()&&E.startsWith("publishers/")){const v=this.apiClient.getProject(),A=this.apiClient.getLocation();E=`projects/${v}/locations/${A}/`+E}let _={};this.apiClient.isVertexAI()&&((r=n.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(n.config===void 0?n.config={responseModalities:[O.AUDIO]}:n.config.responseModalities=[O.AUDIO]),!((l=n.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const S={model:E,config:n.config,callbacks:n.callbacks};return this.apiClient.isVertexAI()?_=wo(this.apiClient,S):_=xo(this.apiClient,S),delete _.config,y.send(JSON.stringify(_)),new os(y,this.apiClient)}}const ts={turnComplete:!0};class os{constructor(n,e){this.conn=n,this.apiClient=e}tLiveClientContent(n,e){if(e.turns!==null&&e.turns!==void 0){let t=[];try{t=w(n,e.turns),n.isVertexAI()?t=t.map(r=>U(n,r)):t=t.map(r=>j(n,r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:t,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(n,e){let t=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?t=e.functionResponses:t=[e.functionResponses],t.length===0)throw new Error("functionResponses is required.");for(const l of t){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!n.isVertexAI()&&!("id"in l))throw new Error(jr)}return{toolResponse:{functionResponses:t}}}sendClientContent(n){n=Object.assign(Object.assign({},ts),n);const e=this.tLiveClientContent(this.apiClient,n);this.conn.send(JSON.stringify(e))}sendRealtimeInput(n){let e={};this.apiClient.isVertexAI()?e={realtimeInput:Fo(this.apiClient,n)}:e={realtimeInput:Uo(this.apiClient,n)},this.conn.send(JSON.stringify(e))}sendToolResponse(n){if(n.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,n);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function is(o){const n={};return o.forEach((e,t)=>{n[t]=e}),n}function rs(o){const n=new Headers;for(const[e,t]of Object.entries(o))n.append(e,t);return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ss extends B{constructor(n){super(),this.apiClient=n,this.generateContent=async e=>await this.generateContentInternal(e),this.generateContentStream=async e=>await this.generateContentStreamInternal(e),this.generateImages=async e=>await this.generateImagesInternal(e).then(t=>{var r;let l;const a=[];if(t!=null&&t.generatedImages)for(const c of t.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c==null?void 0:c.safetyAttributes:a.push(c);let d;return l?d={generatedImages:a,positivePromptSafetyAttributes:l}:d={generatedImages:a},d}),this.list=async e=>{var t;const a={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((t=a.config)===null||t===void 0)&&t.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Q(V.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(a),a)}}async generateContentInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=dn(this.apiClient,n);return d=T("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=fn(this.apiClient,f),h=new H;return Object.assign(h,p),h})}else{const u=un(this.apiClient,n);return d=T("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=cn(this.apiClient,f),h=new H;return Object.assign(h,p),h})}}async generateContentStreamInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=dn(this.apiClient,n);d=T("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return a=f.requestStream({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}),a.then(function(p){return z(this,arguments,function*(){var h,g,m,C;try{for(var y=!0,E=re(p),_;_=yield M(E.next()),h=_.done,!h;y=!0){C=_.value,y=!1;const v=fn(f,yield M(C.json())),A=new H;Object.assign(A,v),yield yield M(A)}}catch(S){g={error:S}}finally{try{!y&&!h&&(m=E.return)&&(yield M(m.call(E)))}finally{if(g)throw g.error}}})})}else{const u=un(this.apiClient,n);d=T("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query;const f=this.apiClient;return a=f.requestStream({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return z(this,arguments,function*(){var h,g,m,C;try{for(var y=!0,E=re(p),_;_=yield M(E.next()),h=_.done,!h;y=!0){C=_.value,y=!1;const v=cn(f,yield M(C.json())),A=new H;Object.assign(A,v),yield yield M(A)}}catch(S){g={error:S}}finally{try{!y&&!h&&(m=E.return)&&(yield M(m.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=ji(this.apiClient,n);return d=T("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=qr(this.apiClient,f),h=new ze;return Object.assign(h,p),h})}else{const u=yi(this.apiClient,n);return d=T("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=vr(this.apiClient,f),h=new ze;return Object.assign(h,p),h})}}async generateImagesInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=nr(this.apiClient,n);return d=T("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=br(this.apiClient,f),h=new Xe;return Object.assign(h,p),h})}else{const u=Ei(this.apiClient,n);return d=T("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Sr(this.apiClient,f),h=new Xe;return Object.assign(h,p),h})}}async get(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=tr(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>ae(this.apiClient,f))}else{const u=_i(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>le(this.apiClient,f))}}async listInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=ir(this.apiClient,n);return d=T("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Yr(this.apiClient,f),h=new Ze;return Object.assign(h,p),h})}else{const u=Ii(this.apiClient,n);return d=T("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ar(this.apiClient,f),h=new Ze;return Object.assign(h,p),h})}}async update(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=sr(this.apiClient,n);return d=T("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>ae(this.apiClient,f))}else{const u=Mi(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>le(this.apiClient,f))}}async delete(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=lr(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Kr(),p=new Qe;return Object.assign(p,f),p})}else{const u=Pi(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(()=>{const f=Mr(),p=new Qe;return Object.assign(p,f),p})}}async countTokens(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=ur(this.apiClient,n);return d=T("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Wr(this.apiClient,f),h=new je;return Object.assign(h,p),h})}else{const u=xi(this.apiClient,n);return d=T("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Pr(this.apiClient,f),h=new je;return Object.assign(h,p),h})}}async computeTokens(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const d=dr(this.apiClient,n);return l=T("{model}:computeTokens",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(c=>{const u=Or(this.apiClient,c),f=new Dt;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=pr(this.apiClient,n);return d=T("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>Qr(this.apiClient,f))}else{const u=Ni(this.apiClient,n);return d=T("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Dr(this.apiClient,f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ls(o,n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function as(o,n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function us(o,n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const r=i(n,["resourceName"]);r!=null&&s(e,["_url","resourceName"],r);const l=i(n,["config"]);return l!=null&&s(e,["config"],l),e}function ds(o,n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const r=i(n,["video","encodedVideo"]);r!=null&&s(e,["videoBytes"],N(o,r));const l=i(n,["encoding"]);return l!=null&&s(e,["mimeType"],l),e}function cs(o,n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],ds(o,t)),e}function fs(o,n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>cs(o,d))),s(e,["generatedVideos"],a)}const r=i(n,["raiMediaFilteredCount"]);r!=null&&s(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function ps(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);a!=null&&s(e,["error"],a);const d=i(n,["response","generateVideoResponse"]);return d!=null&&s(e,["response"],fs(o,d)),e}function hs(o,n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const r=i(n,["bytesBase64Encoded"]);r!=null&&s(e,["videoBytes"],N(o,r));const l=i(n,["mimeType"]);return l!=null&&s(e,["mimeType"],l),e}function gs(o,n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],hs(o,t)),e}function ms(o,n){const e={},t=i(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(d=>gs(o,d))),s(e,["generatedVideos"],a)}const r=i(n,["raiMediaFilteredCount"]);r!=null&&s(e,["raiMediaFilteredCount"],r);const l=i(n,["raiMediaFilteredReasons"]);return l!=null&&s(e,["raiMediaFilteredReasons"],l),e}function pn(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);a!=null&&s(e,["error"],a);const d=i(n,["response"]);return d!=null&&s(e,["response"],ms(o,d)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cs extends B{constructor(n){super(),this.apiClient=n}async getVideosOperation(n){const e=n.operation,t=n.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let l;return t&&"httpOptions"in t&&(l=t.httpOptions),this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:e.name,config:t})}async getVideosOperationInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=as(this.apiClient,n);return d=T("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>pn(this.apiClient,f))}else{const u=ls(this.apiClient,n);return d=T("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>ps(this.apiClient,f))}}async fetchPredictVideosOperationInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const d=us(this.apiClient,n);return l=T("{resourceName}:fetchPredictOperation",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(c=>pn(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ts="Content-Type",ys="X-Server-Timeout",vs="User-Agent",Es="x-goog-api-client",_s="0.13.0",Ss=`google-genai-sdk/${_s}`,Is="v1beta1",As="v1beta",hn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Nn extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ClientError"}}class ue extends Error{constructor(n,e){e?super(n,{cause:e}):super(n,{cause:new Error().stack}),this.message=n,this.name="ServerError"}}class Ms{constructor(n){var e,t;this.clientOptions=Object.assign(Object.assign({},n),{project:n.project,location:n.location,apiKey:n.apiKey,vertexai:n.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Is,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:As,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,n.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,n.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var n;return(n=this.clientOptions.vertexai)!==null&&n!==void 0?n:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(n){if(!n||n.baseUrl===void 0||n.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const t=[n.baseUrl.endsWith("/")?n.baseUrl.slice(0,-1):n.baseUrl];return n.apiVersion&&n.apiVersion!==""&&t.push(n.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const n=this.getBaseUrl(),e=new URL(n);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(n){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=n;else throw new Error("HTTP options are not correctly set.")}constructUrl(n,e,t){const r=[this.getRequestUrlInternal(e)];return t&&r.push(this.getBaseResourcePath()),n!==""&&r.push(n),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(n){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||n.path.startsWith("projects/")||n.httpMethod==="GET"&&n.path.startsWith("publishers/google/models"))}async request(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);if(n.queryParams)for(const[a,d]of Object.entries(n.queryParams))r.searchParams.append(a,String(d));let l={};if(n.httpMethod==="GET"){if(n.body&&n.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=n.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e,n.abortSignal),this.unaryApiCall(r,l,n.httpMethod)}patchHttpOptions(n,e){const t=JSON.parse(JSON.stringify(n));for(const[r,l]of Object.entries(e))typeof l=="object"?t[r]=Object.assign(Object.assign({},t[r]),l):l!==void 0&&(t[r]=l);return t}async requestStream(n){let e=this.clientOptions.httpOptions;n.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,n.httpOptions));const t=this.shouldPrependVertexProjectPath(n),r=this.constructUrl(n.path,e,t);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=n.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e,n.abortSignal),this.streamApiCall(r,l,n.httpMethod)}async includeExtraHttpOptionsToRequestInit(n,e,t){if(e&&e.timeout||t){const r=new AbortController,l=r.signal;e.timeout&&(e==null?void 0:e.timeout)>0&&setTimeout(()=>r.abort(),e.timeout),t&&t.addEventListener("abort",()=>{r.abort()}),n.signal=l}return n.headers=await this.getHeadersInternal(e),n}async unaryApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async r=>(await gn(r),new ie(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(n,e,t){return this.apiCall(n.toString(),Object.assign(Object.assign({},e),{method:t})).then(async r=>(await gn(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(n){var e;return z(this,arguments,function*(){const r=(e=n==null?void 0:n.body)===null||e===void 0?void 0:e.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:d,value:c}=yield M(r.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(c);try{const p=JSON.parse(u);if("error"in p){const h=JSON.parse(JSON.stringify(p.error)),g=h.status,m=h.code,C=`got status: ${g}. ${JSON.stringify(p)}`;if(m>=400&&m<500)throw new Nn(C);if(m>=500&&m<600)throw new ue(C)}}catch(p){const h=p;if(h.name==="ClientError"||h.name==="ServerError")throw p}a+=u;let f=a.match(hn);for(;f;){const p=f[1];try{const h=new Response(p,{headers:n==null?void 0:n.headers,status:n==null?void 0:n.status,statusText:n==null?void 0:n.statusText});yield yield M(new ie(h)),a=a.slice(f[0].length),f=a.match(hn)}catch(h){throw new Error(`exception parsing stream chunk ${p}. ${h}`)}}}}finally{r.releaseLock()}})}async apiCall(n,e){return fetch(n,e).catch(t=>{throw new Error(`exception ${t} sending request`)})}getDefaultHeaders(){const n={},e=Ss+" "+this.clientOptions.userAgentExtra;return n[vs]=e,n[Es]=e,n[Ts]="application/json",n}async getHeadersInternal(n){const e=new Headers;if(n&&n.headers){for(const[t,r]of Object.entries(n.headers))e.append(t,r);n.timeout&&n.timeout>0&&e.append(ys,String(Math.ceil(n.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(n,e){var t;const r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(n);r.sizeBytes=String(a.size);const d=(t=e==null?void 0:e.mimeType)!==null&&t!==void 0?t:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const c=await this.fetchUploadUrl(r,e);return l.upload(n,c,this)}async downloadFile(n){await this.clientOptions.downloader.download(n,this)}async fetchUploadUrl(n,e){var t;let r={};e!=null&&e.httpOptions?r=e.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${n.mimeType}`}};const l={file:n},a=await this.request({path:T("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!(a!=null&&a.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(t=a==null?void 0:a.headers)===null||t===void 0?void 0:t["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function gn(o){var n;if(o===void 0)throw new ue("response is undefined");if(!o.ok){const e=o.status,t=o.statusText;let r;!((n=o.headers.get("content-type"))===null||n===void 0)&&n.includes("application/json")?r=await o.json():r={error:{message:await o.text(),code:o.status,status:o.statusText}};const l=`got status: ${e} ${t}. ${JSON.stringify(r)}`;throw e>=400&&e<500?new Nn(l):e>=500&&e<600?new ue(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ps(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function Rs(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),t}function xs(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Rs(o,t,e)),e}function ws(o,n){const e={},t=i(n,["textInput"]);t!=null&&s(e,["textInput"],t);const r=i(n,["output"]);return r!=null&&s(e,["output"],r),e}function Ds(o,n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ws(o,l))),s(e,["examples","examples"],r)}return e}function Ns(o,n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=i(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&s(e,["displayName"],r),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=i(n,["epochCount"]);e!==void 0&&l!=null&&s(e,["tuningTask","hyperparameters","epochCount"],l);const a=i(n,["learningRateMultiplier"]);if(a!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],a),i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=i(n,["batchSize"]);e!==void 0&&d!=null&&s(e,["tuningTask","hyperparameters","batchSize"],d);const c=i(n,["learningRate"]);return e!==void 0&&c!=null&&s(e,["tuningTask","hyperparameters","learningRate"],c),t}function Ls(o,n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const r=i(n,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],Ds(o,r));const l=i(n,["config"]);return l!=null&&s(e,["config"],Ns(o,l,e)),e}function Vs(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}function Us(o,n,e){const t={},r=i(n,["pageSize"]);e!==void 0&&r!=null&&s(e,["_query","pageSize"],r);const l=i(n,["pageToken"]);e!==void 0&&l!=null&&s(e,["_query","pageToken"],l);const a=i(n,["filter"]);return e!==void 0&&a!=null&&s(e,["_query","filter"],a),t}function Fs(o,n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Us(o,t,e)),e}function ks(o,n,e){const t={},r=i(n,["gcsUri"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function Gs(o,n){const e={},t=i(n,["gcsUri"]);return t!=null&&s(e,["validationDatasetUri"],t),e}function qs(o,n,e){const t={},r=i(n,["validationDataset"]);e!==void 0&&r!=null&&s(e,["supervisedTuningSpec"],Gs(o,r));const l=i(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&s(e,["tunedModelDisplayName"],l);const a=i(n,["description"]);e!==void 0&&a!=null&&s(e,["description"],a);const d=i(n,["epochCount"]);e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],d);const c=i(n,["learningRateMultiplier"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c);const u=i(n,["adapterSize"]);if(e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function Bs(o,n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const r=i(n,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],ks(o,r,e));const l=i(n,["config"]);return l!=null&&s(e,["config"],qs(o,l,e)),e}function Hs(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["model"],t);const r=i(n,["name"]);return r!=null&&s(e,["endpoint"],r),e}function Ln(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["state"]);r!=null&&s(e,["state"],In(o,r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const d=i(n,["tuningTask","completeTime"]);d!=null&&s(e,["endTime"],d);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=i(n,["description"]);u!=null&&s(e,["description"],u);const f=i(n,["baseModel"]);f!=null&&s(e,["baseModel"],f);const p=i(n,["_self"]);p!=null&&s(e,["tunedModel"],Hs(o,p));const h=i(n,["distillationSpec"]);h!=null&&s(e,["distillationSpec"],h);const g=i(n,["experiment"]);g!=null&&s(e,["experiment"],g);const m=i(n,["labels"]);m!=null&&s(e,["labels"],m);const C=i(n,["pipelineJob"]);C!=null&&s(e,["pipelineJob"],C);const y=i(n,["tunedModelDisplayName"]);return y!=null&&s(e,["tunedModelDisplayName"],y),e}function bs(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ln(o,a))),s(e,["tuningJobs"],l)}return e}function $s(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);return a!=null&&s(e,["error"],a),e}function Js(o,n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],t);const r=i(n,["endpoint"]);return r!=null&&s(e,["endpoint"],r),e}function de(o,n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const r=i(n,["state"]);r!=null&&s(e,["state"],In(o,r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&s(e,["startTime"],a);const d=i(n,["endTime"]);d!=null&&s(e,["endTime"],d);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=i(n,["error"]);u!=null&&s(e,["error"],u);const f=i(n,["description"]);f!=null&&s(e,["description"],f);const p=i(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const h=i(n,["tunedModel"]);h!=null&&s(e,["tunedModel"],Js(o,h));const g=i(n,["supervisedTuningSpec"]);g!=null&&s(e,["supervisedTuningSpec"],g);const m=i(n,["tuningDataStats"]);m!=null&&s(e,["tuningDataStats"],m);const C=i(n,["encryptionSpec"]);C!=null&&s(e,["encryptionSpec"],C);const y=i(n,["partnerModelTuningSpec"]);y!=null&&s(e,["partnerModelTuningSpec"],y);const E=i(n,["distillationSpec"]);E!=null&&s(e,["distillationSpec"],E);const _=i(n,["experiment"]);_!=null&&s(e,["experiment"],_);const S=i(n,["labels"]);S!=null&&s(e,["labels"],S);const v=i(n,["pipelineJob"]);v!=null&&s(e,["pipelineJob"],v);const A=i(n,["tunedModelDisplayName"]);return A!=null&&s(e,["tunedModelDisplayName"],A),e}function Ys(o,n){const e={},t=i(n,["nextPageToken"]);t!=null&&s(e,["nextPageToken"],t);const r=i(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>de(o,a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ks extends B{constructor(n){super(),this.apiClient=n,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new Q(V.PAGED_ITEM_TUNING_JOBS,t=>this.listInternal(t),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const t=await this.tuneMldevInternal(e);let r="";return t.metadata!==void 0&&t.metadata.tunedModel!==void 0?r=t.metadata.tunedModel:t.name!==void 0&&t.name.includes("/operations/")&&(r=t.name.split("/operations/")[0]),{name:r,state:oe.JOB_STATE_QUEUED}}}}async getInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Vs(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>de(this.apiClient,f))}else{const u=Ps(this.apiClient,n);return d=T("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>Ln(this.apiClient,f))}}async listInternal(n){var e,t,r,l;let a,d="",c={};if(this.apiClient.isVertexAI()){const u=Fs(this.apiClient,n);return d=T("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(f=>f.json()),a.then(f=>{const p=Ys(this.apiClient,f),h=new en;return Object.assign(h,p),h})}else{const u=xs(this.apiClient,n);return d=T("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:d,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=n.config)===null||l===void 0?void 0:l.abortSignal}).then(f=>f.json()),a.then(f=>{const p=bs(this.apiClient,f),h=new en;return Object.assign(h,p),h})}}async tuneInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI()){const d=Bs(this.apiClient,n);return l=T("tuningJobs",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(c=>de(this.apiClient,c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(n){var e,t;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Ls(this.apiClient,n);return l=T("tunedModels",d._url),a=d._query,delete d.config,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=n.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(t=n.config)===null||t===void 0?void 0:t.abortSignal}).then(c=>c.json()),r.then(c=>$s(this.apiClient,c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ws{async download(n,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Os=1024*1024*8,zs=3,Xs=1e3,Zs=2,ne="x-goog-upload-status";async function Qs(o,n,e){var t,r,l;let a=0,d=0,c=new ie(new Response),u="upload";for(a=o.size;d<a;){const p=Math.min(Os,a-d),h=o.slice(d,d+p);d+p>=a&&(u+=", finalize");let g=0,m=Xs;for(;g<zs&&(c=await e.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:n,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(d),"Content-Length":String(p)}}}),!(!((t=c==null?void 0:c.headers)===null||t===void 0)&&t[ne]));)g++,await el(m),m=m*Zs;if(d+=p,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[ne])!=="active")break;if(a<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((l=c==null?void 0:c.headers)===null||l===void 0?void 0:l[ne])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function js(o){return{size:o.size,type:o.type}}function el(o){return new Promise(n=>setTimeout(n,o))}class nl{async upload(n,e,t){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await Qs(n,e,t)}async stat(n){if(typeof n=="string")throw new Error("File path is not supported in browser uploader.");return await js(n)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tl{create(n,e,t){return new ol(n,e,t)}}class ol{constructor(n,e,t){this.url=n,this.headers=e,this.callbacks=t}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(n){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(n)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mn="x-goog-api-key";class il{constructor(n){this.apiKey=n}async addAuthHeaders(n){n.get(mn)===null&&n.append(mn,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rl="gl-node/";class sl{constructor(n){var e;if(n.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(n.project||n.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=n.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=n.apiKey;const t=kn(n,void 0,void 0);t&&(n.httpOptions?n.httpOptions.baseUrl=t:n.httpOptions={baseUrl:t}),this.apiVersion=n.apiVersion;const r=new il(this.apiKey);this.apiClient=new Ms({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:rl+"web",uploader:new nl,downloader:new Ws}),this.models=new ss(this.apiClient),this.live=new ns(this.apiClient,r,new tl),this.chats=new Bt(this.models,this.apiClient),this.caches=new Ft(this.apiClient),this.files=new jt(this.apiClient),this.operations=new Cs(this.apiClient),this.tunings=new Ks(this.apiClient)}}const ll=["RECTA 1 AGUJA","RECTA 2 AGUJAS","OVERLOCK","COVERSTITCH","PRESILLADORA","ZZ","OJAL","BOTON","SCHIPS","ISEW","FLAT SEAMER","SUPREME"],Cn=[{name:"TENSIN",key:"tension",times:[2,2,3,3,2,3,3,3,3,3,5,2]},{name:"TIPO Y POSICIN DE AGUJAS",key:"agujas",times:[1,1,2,2,1,1,1,1,2,2,2,1]},{name:"ENHEBRADO HILO",key:"enhebrado",times:[1,.5,2,2,1,1,1,1,2,2,4,4]},{name:"PRESIN PRENSATELAS",key:"prensatelas",times:[.5,1,.5,.5,null,.5,null,null,.5,.5,1,null]},{name:"PPP",key:"ppp",times:[1,1,1,1,null,1,null,null,1,1,null,null]}],al=["hola","buenos dias","buenos das","buenas tardes","buenas noches","hello","hi","hey","saludos"];class ul{constructor(){this.ai=null,this.modelName="gemini-2.5-pro-exp-03-25",this.userProblem="",this.userDescription="",this.userModule="",this.activeIntervals=[]}init(){const n=document.getElementById("chat-form");if(!n){console.error("Chat form not found");return}const e=n.getAttribute("data-gemini-key");if(!e){console.error("Gemini API key not found");return}this.ai=new sl({apiKey:e}),this.setupEventListeners()}setupEventListeners(){document.getElementById("chat-form").addEventListener("submit",this.handleSubmit.bind(this))}isGreeting(n){const e=n.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return al.some(t=>e.includes(t))}getTimeBasedGreeting(){const n=new Date().getHours();return n>=5&&n<12?"Buenos das":n>=12&&n<19?"Buenas tardes":"Buenas noches"}async showTypingIndicator(n){const e=document.createElement("div");e.className="text-left mb-4 flex items-start gap-2";const t=document.createElement("div");t.className="relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600 flex-shrink-0",t.innerHTML=`
            <img class="w-10 h-10 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500"
                 src="/images/Avatar.webp"
                 alt="AI Avatar">
        `;const r=document.createElement("span");r.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%] animate-pulse",r.textContent="Escribiendo...",e.appendChild(t),e.appendChild(r),n.appendChild(e),n.scrollTop=n.scrollHeight,await new Promise(l=>setTimeout(l,1500)),e.remove()}async appendChatMessage(n,e){await this.showTypingIndicator(e);const t=document.createElement("div");t.className="text-left mb-4 flex items-start gap-2";const r=document.createElement("div");r.className="relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600 flex-shrink-0",r.innerHTML=`
            <img class="w-10 h-10 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500"
                 src="/images/Avatar.webp"
                 alt="AI Avatar">
        `;const l=document.createElement("span");l.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%]",l.innerHTML=n,t.appendChild(r),t.appendChild(l),e.appendChild(t),e.scrollTop=e.scrollHeight}async handleSubmit(n){n.preventDefault(),n.stopPropagation();const e=document.getElementById("message"),t=document.getElementById("chat-messages"),r=e.value.trim();if(r)switch(window.iaChatStep||(window.iaChatStep=0),t.innerHTML+=`
            <div class="text-right mb-4">
                <span class="bg-blue-500 text-white p-3 rounded-lg inline-block max-w-[70%]">
                    ${this.escapeHtml(r)}
                </span>
            </div>`,e.value="",window.iaChatStep){case 0:if(this.isGreeting(r)){const l=this.getTimeBasedGreeting();await this.appendChatMessage(`${l}, en qu puedo ayudarte?`,t),await this.askProblem(t)}else await this.askProblem(t);break;case 1:this.userProblem=r,await this.askDescription(t);break;case 2:this.userDescription=r,this.askModule(t);break;case 3:this.showMachineSelect(),window.iaChatStep=0;break}}async askProblem(n){await this.showTypingIndicator(n),this.appendChatMessage("Antes de continuar por favor ayudame con los siguientes datos por favor...<br><strong>Ingresa que problema tienes:</strong>",n),window.iaChatStep=1}async askDescription(n){await this.showTypingIndicator(n),this.appendChatMessage("Ahora describe muy general que est sucediendo:",n),window.iaChatStep=2}askModule(n){const e=document.createElement("div");e.className="text-left mb-4";const t=document.createElement("span");t.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%]",t.innerHTML=`Ahora por ltimo selecciona a qu mdulo se refiere:<br>
            <select id="modul" style="width:100%"></select>`,e.appendChild(t),n.appendChild(e),n.scrollTop=n.scrollHeight,setTimeout(()=>{window.$&&$("#modul").length&&($("#modul").select2({placeholder:"Selecciona un mdulo",ajax:{url:"/obtener-modulos",type:"GET",dataType:"json",delay:250,processResults:function(r){return{results:$.map(r,function(l){return{id:l.MODULEID,text:l.MODULEID}})}}}}),$("#modul").on("select2:select",r=>{this.userModule=r.params.data.text,window.iaChatStep=3,this.showSummary(n),this.showMachineSelect()}))},100),window.iaChatStep=99}showSummary(n){const e=document.createElement("div");e.className="text-left mb-4";const t=document.createElement("span");t.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%]",t.innerHTML=`<strong>Resumen:</strong><br>
            <b>Problema:</b> ${this.escapeHtml(this.userProblem)}<br>
            <b>Descripcin:</b> ${this.escapeHtml(this.userDescription)}<br>
            <b>Mdulo:</b> ${this.escapeHtml(this.userModule)}`,e.appendChild(t),n.appendChild(e)}showMachineSelect(){const n=document.getElementById("chat-messages"),e=document.createElement("div");e.className="text-left mb-4";const t=document.createElement("span");t.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%]";let r=`<label class="block mb-2">Por favor selecciona el tipo de mquina:</label>
        <select id="machine-select" class="w-full p-2 border rounded dark:bg-gray-700 dark:text-white">
            <option value="">Selecciona una mquina</option>`;ll.forEach((l,a)=>{r+=`<option value="${a}">${l}</option>`}),r+='</select><div id="machine-steps" class="mt-4"></div>',t.innerHTML=r,e.appendChild(t),n.appendChild(e),n.scrollTop=n.scrollHeight,this.setupMachineSelectListener()}setupMachineSelectListener(){const n=document.getElementById("machine-select");n&&n.addEventListener("change",e=>{const t=parseInt(e.target.value);isNaN(t)||this.showSteps(t)})}async showSteps(n){const e=document.getElementById("chat-messages");this.cleanup(),await this.appendChatMessage("Gracias por favor sigue estos pasos antes de que escalemos con la generacion de un ticket de atencin",e),setTimeout(()=>{let r=0;const l=()=>{if(r>=Cn.length){this.showFinalQuestion();return}const a=Cn[r],d=a.times[n];if(d===null){r++,l();return}this.showStep(a,d,r,()=>{r++,l()})};l()},500)}showStep(n,e,t,r){const l=document.getElementById("chat-messages"),a=document.createElement("div");a.className="text-left mb-4";const d=document.createElement("span");d.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%] flex flex-col",a.appendChild(d),l.appendChild(a),l.scrollTop=l.scrollHeight;let c=e>=1?`${Math.round(e)} min`:`${Math.round(e*60)} seg`,u=Math.round(e*60);d.innerHTML=`<strong>Paso ${t+1}:</strong> ${n.name}
            <span class="ml-2 text-xs text-gray-500">
                (<span class="timer">${this.formatTime(u)}</span> restante | <span class="timer-num">${c}</span>)
            </span>`;const f=d.querySelector(".timer"),p=setInterval(()=>{u--,f.textContent=this.formatTime(u),u<=0&&(clearInterval(p),r())},1e3);this.activeIntervals.push(p)}showFinalQuestion(){const n=document.getElementById("chat-messages"),e=document.createElement("div");e.className="text-left mb-4";const t=document.createElement("span");t.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%]",t.innerHTML=`
            <p>Pudiste resolver el problema, con los pasos de ayuda?</p>
            <div class="flex gap-4 mt-3">
                <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded" onclick="window.chatManager.handleResponse(true)">
                    SI
                </button>
                <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="window.chatManager.handleResponse(false)">
                    NO
                </button>
            </div>
        `,e.appendChild(t),n.appendChild(e),n.scrollTop=n.scrollHeight}async handleResponse(n){const e=document.getElementById("chat-messages");try{const t={modulo:this.userModule,problema:this.userProblem,descripcion:this.userDescription,status:n?"Autonomo":"SIN_ASIGNAR"},r=await fetch("/ticketsOT",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(t)}),l=await r.json();if(!r.ok)throw new Error(l.message||"Error en la respuesta del servidor");if(l.success){await Swal.fire({icon:"success",title:"Ticket registrado",text:n?`Gracias por haberlo resulto de forma autonoma, se igual manera se hara llegar una notificacion como historial que hubo una posible falla, folio: ${l.folio}`:`La Orden de Trabajo fue creada exitosamente con el folio: ${l.folio}.`,confirmButtonText:"OK",buttonsStyling:!0,customClass:{confirmButton:"swal2-confirm"}}),await this.appendChatMessage(`<strong>Folio generado:</strong> ${l.folio}`,e);const a=n?"Gracias me alegra mucho que se haya podido solucionar el problema.<br>Recuerda que estoy para ayudarte":"Gracias hemos estamos generando tu ticket de atencin, en breve te atender el mecnico a cargo de tu sector, que tengas un excelente da";await this.appendChatMessage(a,e),setTimeout(()=>this.showFinalResetQuestion(e),1e3)}}catch(t){console.error("Error completo:",t),Swal.fire({icon:"error",title:"Error",text:t.message||"Error inesperado. Intntalo de nuevo.",customClass:{title:"text-black",content:"text-black",confirmButton:"border-black"}})}}showFinalResetQuestion(n){const e=document.createElement("div");e.className="text-left mb-4";const t=document.createElement("span");t.className="bg-gray-200 dark:bg-gray-700 dark:text-white p-3 rounded-lg inline-block max-w-[70%]",t.innerHTML=`
            <p>Quieres generar una nueva asistencia?</p>
            <div class="flex gap-4 mt-3">
                <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded" onclick="window.chatManager.handleResetResponse(true)">
                    SI
                </button>
                <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" onclick="window.chatManager.handleResetResponse(false)">
                    NO
                </button>
            </div>
        `,e.appendChild(t),n.appendChild(t),n.scrollTop=n.scrollHeight}handleResetResponse(n){const e=document.getElementById("chat-messages");n?(e.innerHTML="",this.resetChat(),this.appendChatMessage(`${this.getTimeBasedGreeting()}, en qu puedo ayudarte?`,e)):this.appendChatMessage("Gracias por usar nuestro servicio. Hasta pronto!",e).then(()=>{setTimeout(()=>{e.innerHTML="",this.resetChat()},2e3)})}resetChat(){this.userProblem="",this.userDescription="",this.userModule="",window.iaChatStep=0}escapeHtml(n){const e=document.createElement("div");return e.textContent=n,e.innerHTML}formatTime(n){const e=Math.floor(n/60),t=n%60;return`${e}:${t.toString().padStart(2,"0")}`}cleanup(){this.activeIntervals.forEach(n=>clearInterval(n)),this.activeIntervals=[]}}document.addEventListener("DOMContentLoaded",()=>{window.chatManager=new ul,window.chatManager.init(),window.addEventListener("beforeunload",()=>window.chatManager.cleanup())});
