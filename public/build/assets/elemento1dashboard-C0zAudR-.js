import{c as cn,i as C,a as H,b as sn,d as V}from"./transform-oMh35NN8.js";function I(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function fn(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function W(n){let t,e,r;n.length!==2?(t=I,e=(o,s)=>I(n(o),s),r=(o,s)=>n(o)-s):(t=n===I||n===fn?n:ln,e=n,r=n);function i(o,s,a=0,l=o.length){if(a<l){if(t(s,s)!==0)return l;do{const f=a+l>>>1;e(o[f],s)<0?a=f+1:l=f}while(a<l)}return a}function c(o,s,a=0,l=o.length){if(a<l){if(t(s,s)!==0)return l;do{const f=a+l>>>1;e(o[f],s)<=0?a=f+1:l=f}while(a<l)}return a}function u(o,s,a=0,l=o.length){const f=i(o,s,a,l-1);return f>a&&r(o[f-1],s)>-r(o[f],s)?f-1:f}return{left:i,center:u,right:c}}function ln(){return 0}function hn(n){return n===null?NaN:+n}const mn=W(I),dn=mn.right;W(hn).center;const gn=Math.sqrt(50),pn=Math.sqrt(10),yn=Math.sqrt(2);function L(n,t,e){const r=(t-n)/Math.max(0,e),i=Math.floor(Math.log10(r)),c=r/Math.pow(10,i),u=c>=gn?10:c>=pn?5:c>=yn?2:1;let o,s,a;return i<0?(a=Math.pow(10,-i)/u,o=Math.round(n*a),s=Math.round(t*a),o/a<n&&++o,s/a>t&&--s,a=-a):(a=Math.pow(10,i)*u,o=Math.round(n/a),s=Math.round(t/a),o*a<n&&++o,s*a>t&&--s),s<o&&.5<=e&&e<2?L(n,t,e*2):[o,s,a]}function Mn(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const r=t<n,[i,c,u]=r?L(t,n,e):L(n,t,e);if(!(c>=i))return[];const o=c-i+1,s=new Array(o);if(r)if(u<0)for(let a=0;a<o;++a)s[a]=(c-a)/-u;else for(let a=0;a<o;++a)s[a]=(c-a)*u;else if(u<0)for(let a=0;a<o;++a)s[a]=(i+a)/-u;else for(let a=0;a<o;++a)s[a]=(i+a)*u;return s}function R(n,t,e){return t=+t,n=+n,e=+e,L(n,t,e)[2]}function xn(n,t,e){t=+t,n=+n,e=+e;const r=t<n,i=r?R(t,n,e):R(n,t,e);return(r?-1:1)*(i<0?1/-i:i)}function wn(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(c){for(i=0;i<e;++i)r[i]=n[i]*(1-c)+t[i]*c;return r}}function bn(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function vn(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),c=new Array(e),u;for(u=0;u<r;++u)i[u]=F(n[u],t[u]);for(;u<e;++u)c[u]=t[u];return function(o){for(u=0;u<r;++u)c[u]=i[u](o);return c}}function Nn(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function kn(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=F(n[i],t[i]):r[i]=t[i];return function(c){for(i in e)r[i]=e[i](c);return r}}function F(n,t){var e=typeof t,r;return t==null||e==="boolean"?cn(t):(e==="number"?C:e==="string"?(r=V(t))?(t=r,H):sn:t instanceof V?H:t instanceof Date?Nn:bn(t)?wn:Array.isArray(t)?vn:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?kn:C)(n,t)}function An(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function Sn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function $(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function k(n){return n=$(Math.abs(n)),n?n[1]:NaN}function On(n,t){return function(e,r){for(var i=e.length,c=[],u=0,o=n[0],s=0;i>0&&o>0&&(s+o+1>r&&(o=Math.max(1,r-s)),c.push(e.substring(i-=o,i+o)),!((s+=o+1)>r));)o=n[u=(u+1)%n.length];return c.reverse().join(t)}}function En(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var Tn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function j(n){if(!(t=Tn.exec(n)))throw new Error("invalid format: "+n);var t;return new B({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}j.prototype=B.prototype;function B(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}B.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dn(n){n:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break n;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var nn;function In(n,t){var e=$(n,t);if(!e)return n+"";var r=e[0],i=e[1],c=i-(nn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=r.length;return c===u?r:c>u?r+new Array(c-u+1).join("0"):c>0?r.slice(0,c)+"."+r.slice(c):"0."+new Array(1-c).join("0")+$(n,Math.max(0,t+c-1))[0]}function Z(n,t){var e=$(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const X={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:Sn,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Z(n*100,t),r:Z,s:In,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function Y(n){return n}var J=Array.prototype.map,K=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ln(n){var t=n.grouping===void 0||n.thousands===void 0?Y:On(J.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",c=n.numerals===void 0?Y:En(J.call(n.numerals,String)),u=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",s=n.nan===void 0?"NaN":n.nan+"";function a(f){f=j(f);var m=f.fill,d=f.align,g=f.sign,A=f.symbol,b=f.zero,S=f.width,P=f.comma,x=f.precision,_=f.trim,p=f.type;p==="n"?(P=!0,p="g"):X[p]||(x===void 0&&(x=12),_=!0,p="g"),(b||m==="0"&&d==="=")&&(b=!0,m="0",d="=");var an=A==="$"?e:A==="#"&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",on=A==="$"?r:/[%p]/.test(p)?u:"",U=X[p],un=/[defgprs%]/.test(p);x=x===void 0?6:/[gprs]/.test(p)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function G(h){var w=an,y=on,v,q,O;if(p==="c")y=U(h)+y,h="";else{h=+h;var E=h<0||1/h<0;if(h=isNaN(h)?s:U(Math.abs(h),x),_&&(h=Dn(h)),E&&+h==0&&g!=="+"&&(E=!1),w=(E?g==="("?g:o:g==="-"||g==="("?"":g)+w,y=(p==="s"?K[8+nn/3]:"")+y+(E&&g==="("?")":""),un){for(v=-1,q=h.length;++v<q;)if(O=h.charCodeAt(v),48>O||O>57){y=(O===46?i+h.slice(v+1):h.slice(v))+y,h=h.slice(0,v);break}}}P&&!b&&(h=t(h,1/0));var T=w.length+h.length+y.length,M=T<S?new Array(S-T+1).join(m):"";switch(P&&b&&(h=t(M+h,M.length?S-y.length:1/0),M=""),d){case"<":h=w+h+y+M;break;case"=":h=w+M+h+y;break;case"^":h=M.slice(0,T=M.length>>1)+w+h+y+M.slice(T);break;default:h=M+w+h+y;break}return c(h)}return G.toString=function(){return f+""},G}function l(f,m){var d=a((f=j(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(k(m)/3)))*3,A=Math.pow(10,-g),b=K[8+g/3];return function(S){return d(A*S)+b}}return{format:a,formatPrefix:l}}var D,tn,rn;$n({thousands:",",grouping:[3],currency:["$",""]});function $n(n){return D=Ln(n),tn=D.format,rn=D.formatPrefix,D}function jn(n){return Math.max(0,-k(Math.abs(n)))}function Pn(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(k(t)/3)))*3-k(Math.abs(n)))}function Cn(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,k(t)-k(n))+1}function Rn(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function zn(n){return function(){return n}}function Fn(n){return+n}var Q=[0,1];function N(n){return n}function z(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:zn(isNaN(t)?NaN:.5)}function Bn(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function _n(n,t,e){var r=n[0],i=n[1],c=t[0],u=t[1];return i<r?(r=z(i,r),c=e(u,c)):(r=z(r,i),c=e(c,u)),function(o){return c(r(o))}}function Un(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),c=new Array(r),u=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=z(n[u],n[u+1]),c[u]=e(t[u],t[u+1]);return function(o){var s=dn(n,o,1,r)-1;return c[s](i[s](o))}}function Gn(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function qn(){var n=Q,t=Q,e=F,r,i,c,u=N,o,s,a;function l(){var m=Math.min(n.length,t.length);return u!==N&&(u=Bn(n[0],n[m-1])),o=m>2?Un:_n,s=a=null,f}function f(m){return m==null||isNaN(m=+m)?c:(s||(s=o(n.map(r),t,e)))(r(u(m)))}return f.invert=function(m){return u(i((a||(a=o(t,n.map(r),C)))(m)))},f.domain=function(m){return arguments.length?(n=Array.from(m,Fn),l()):n.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),l()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),e=An,l()},f.clamp=function(m){return arguments.length?(u=m?!0:N,l()):u!==N},f.interpolate=function(m){return arguments.length?(e=m,l()):e},f.unknown=function(m){return arguments.length?(c=m,f):c},function(m,d){return r=m,i=d,l()}}function Hn(){return qn()(N,N)}function Vn(n,t,e,r){var i=xn(n,t,e),c;switch(r=j(r??",f"),r.type){case"s":{var u=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(c=Pn(i,u))&&(r.precision=c),rn(r,u)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(c=Cn(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=c-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(c=jn(i))&&(r.precision=c-(r.type==="%")*2);break}}return tn(r)}function Zn(n){var t=n.domain;return n.ticks=function(e){var r=t();return Mn(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return Vn(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,c=r.length-1,u=r[i],o=r[c],s,a,l=10;for(o<u&&(a=u,u=o,o=a,a=i,i=c,c=a);l-- >0;){if(a=R(u,o,e),a===s)return r[i]=u,r[c]=o,t(r);if(a>0)u=Math.floor(u/a)*a,o=Math.ceil(o/a)*a;else if(a<0)u=Math.ceil(u*a)/a,o=Math.floor(o*a)/a;else break;s=a}return n},n}function en(){var n=Hn();return n.copy=function(){return Gn(n,en())},Rn.apply(n,arguments),Zn(n)}document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("dashboard-elemento1");if(!n)return;const t=["PENDIENTE","ASIGNADO","PROCESO","ATENDIDO","AUTONOMO","CANCELADO","FINALIZADO"],e={PENDIENTE:{icon:'<span class="material-symbols-outlined text-orange-800 text-3xl">pending_actions</span>',color:"bg-orange-400 dark:bg-orange-500"},ASIGNADO:{icon:'<span class="material-symbols-outlined text-blue-400 text-3xl">assignment_ind</span>',color:"bg-blue-400 dark:bg-blue-400"},PROCESO:{icon:'<span class="material-symbols-outlined text-blue-800 text-3xl">av_timer</span>',color:"bg-blue-400 dark:bg-blue-500"},ATENDIDO:{icon:'<span class="material-symbols-outlined text-indigo-800 text-3xl">preliminary</span>',color:"bg-indigo-400 dark:bg-indigo-500"},AUTONOMO:{icon:'<span class="material-symbols-outlined text-green-800 text-3xl">smart_toy</span>',color:"bg-green-400 dark:bg-green-500"},CANCELADO:{icon:'<span class="material-symbols-outlined text-red-800 text-3xl">dangerous</span>',color:"bg-red-400 dark:bg-red-500"},FINALIZADO:{icon:'<span class="material-symbols-outlined text-cyan-800 text-3xl">fact_check</span>',color:"bg-cyan-400 dark:bg-cyan-500"}};function r(o){const s={};t.forEach(l=>s[l]=0),o.forEach(l=>{const f=(l.Status||"").toUpperCase();t.includes(f)&&s[f]++});const a=Object.entries(s).map(([l,f])=>({key:l,value:f,color:e[l].color,icon:e[l].icon})).filter(l=>l.value>0).sort((l,f)=>f.value-l.value);n.innerHTML=`
            <div class="relative w-full h-[400px]"
                 style="--marginTop: 10px; --marginRight: 35px; --marginBottom: 10px; --marginLeft: 45px;">
                <div class="absolute inset-0
                           h-[calc(100%-var(--marginTop)-var(--marginBottom))]
                           translate-y-[var(--marginTop)]
                           left-[var(--marginLeft)]
                           right-[var(--marginRight)]">
                    ${i(a)}
                </div>
            </div>
        `}function i(o){const a=100/o.length*.85,l=100/o.length*.15,f=Math.max(...o.map(d=>d.value)),m=en().domain([0,f]).range([0,100]);return o.map((d,g)=>`
            <div class="absolute flex items-center w-full group"
                 style="top: ${g*(a+l)}%; height: ${a}%">
                <div class="flex items-center justify-center w-8 h-8 -ml-10">
                    ${e[d.key].icon}
                </div>
                <div class="relative flex items-center w-full h-full">
                    <div class="${e[d.key].color} h-full rounded-r-lg transition-all duration-500 opacity-90 group-hover:opacity-100"
                         style="width: ${m(d.value)}%">
                    </div>
                    <div class="absolute left-2 flex items-center gap-2">
                        <span class="text-xs font-medium text-gray-900 dark:text-white drop-shadow-sm">${d.key}</span>
                    </div>
                    <span class="absolute right-2 text-sm font-bold text-gray-900 dark:text-white">${d.value}</span>
                </div>
            </div>
        `).join("")}let c=null;function u(){fetch("/cardsAteOTs").then(o=>o.json()).then(o=>{c=o,r(c)}).catch(()=>{n.innerHTML='<div class="text-red-500 p-4">No se pudo cargar el dashboard.</div>'})}u(),window.addEventListener("resize",()=>{c&&r(c)})});
