import{P as gn,E as pn}from"./pusher-RuRbGOpv.js";import{c as yn,i as _,a as Z,b as wn,d as W}from"./transform-oMh35NN8.js";import"./_commonjsHelpers-Cpj98o6Y.js";function B(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function xn(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function un(n){let t,r,e;n.length!==2?(t=B,r=(s,c)=>B(n(s),c),e=(s,c)=>n(s)-c):(t=n===B||n===xn?n:vn,r=n,e=n);function a(s,c,i=0,d=s.length){if(i<d){if(t(c,c)!==0)return d;do{const l=i+d>>>1;r(s[l],c)<0?i=l+1:d=l}while(i<d)}return i}function u(s,c,i=0,d=s.length){if(i<d){if(t(c,c)!==0)return d;do{const l=i+d>>>1;r(s[l],c)<=0?i=l+1:d=l}while(i<d)}return i}function o(s,c,i=0,d=s.length){const l=a(s,c,i,d-1);return l>i&&e(s[l-1],c)>-e(s[l],c)?l-1:l}return{left:a,center:o,right:u}}function vn(){return 0}function Mn(n){return n===null?NaN:+n}const bn=un(B),An=bn.right;un(Mn).center;class J extends Map{constructor(t,r=En){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[e,a]of t)this.set(e,a)}get(t){return super.get(K(this,t))}has(t){return super.has(K(this,t))}set(t,r){return super.set(Nn(this,t),r)}delete(t){return super.delete(kn(this,t))}}function K({_intern:n,_key:t},r){const e=t(r);return n.has(e)?n.get(e):r}function Nn({_intern:n,_key:t},r){const e=t(r);return n.has(e)?n.get(e):(n.set(e,r),r)}function kn({_intern:n,_key:t},r){const e=t(r);return n.has(e)&&(r=n.get(e),n.delete(e)),r}function En(n){return n!==null&&typeof n=="object"?n.valueOf():n}const Sn=Math.sqrt(50),On=Math.sqrt(10),Tn=Math.sqrt(2);function j(n,t,r){const e=(t-n)/Math.max(0,r),a=Math.floor(Math.log10(e)),u=e/Math.pow(10,a),o=u>=Sn?10:u>=On?5:u>=Tn?2:1;let s,c,i;return a<0?(i=Math.pow(10,-a)/o,s=Math.round(n*i),c=Math.round(t*i),s/i<n&&++s,c/i>t&&--c,i=-i):(i=Math.pow(10,a)*o,s=Math.round(n/i),c=Math.round(t/i),s*i<n&&++s,c*i>t&&--c),c<s&&.5<=r&&r<2?j(n,t,r*2):[s,c,i]}function Dn(n,t,r){if(t=+t,n=+n,r=+r,!(r>0))return[];if(n===t)return[n];const e=t<n,[a,u,o]=e?j(t,n,r):j(n,t,r);if(!(u>=a))return[];const s=u-a+1,c=new Array(s);if(e)if(o<0)for(let i=0;i<s;++i)c[i]=(u-i)/-o;else for(let i=0;i<s;++i)c[i]=(u-i)*o;else if(o<0)for(let i=0;i<s;++i)c[i]=(a+i)/-o;else for(let i=0;i<s;++i)c[i]=(a+i)*o;return c}function Y(n,t,r){return t=+t,n=+n,r=+r,j(n,t,r)[2]}function In(n,t,r){t=+t,n=+n,r=+r;const e=t<n,a=e?Y(t,n,r):Y(n,t,r);return(e?-1:1)*(a<0?1/-a:a)}function Ln(n,t,r){n=+n,t=+t,r=(a=arguments.length)<2?(t=n,n=0,1):a<3?1:+r;for(var e=-1,a=Math.max(0,Math.ceil((t-n)/r))|0,u=new Array(a);++e<a;)u[e]=n+e*r;return u}function Cn(n,t){t||(t=[]);var r=n?Math.min(t.length,n.length):0,e=t.slice(),a;return function(u){for(a=0;a<r;++a)e[a]=n[a]*(1-u)+t[a]*u;return e}}function $n(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Pn(n,t){var r=t?t.length:0,e=n?Math.min(r,n.length):0,a=new Array(e),u=new Array(r),o;for(o=0;o<e;++o)a[o]=U(n[o],t[o]);for(;o<r;++o)u[o]=t[o];return function(s){for(o=0;o<e;++o)u[o]=a[o](s);return u}}function Rn(n,t){var r=new Date;return n=+n,t=+t,function(e){return r.setTime(n*(1-e)+t*e),r}}function Bn(n,t){var r={},e={},a;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in n?r[a]=U(n[a],t[a]):e[a]=t[a];return function(u){for(a in r)e[a]=r[a](u);return e}}function U(n,t){var r=typeof t,e;return t==null||r==="boolean"?yn(t):(r==="number"?_:r==="string"?(e=W(t))?(t=e,Z):wn:t instanceof W?Z:t instanceof Date?Rn:$n(t)?Cn:Array.isArray(t)?Pn:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bn:_)(n,t)}function jn(n,t){return n=+n,t=+t,function(r){return Math.round(n*(1-r)+t*r)}}function zn(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function z(n,t){if((r=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var r,e=n.slice(0,r);return[e.length>1?e[0]+e.slice(2):e,+n.slice(r+1)]}function L(n){return n=z(Math.abs(n)),n?n[1]:NaN}function Fn(n,t){return function(r,e){for(var a=r.length,u=[],o=0,s=n[0],c=0;a>0&&s>0&&(c+s+1>e&&(s=Math.max(1,e-c)),u.push(r.substring(a-=s,a+s)),!((c+=s+1)>e));)s=n[o=(o+1)%n.length];return u.reverse().join(t)}}function _n(n){return function(t){return t.replace(/[0-9]/g,function(r){return n[+r]})}}var Yn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function F(n){if(!(t=Yn.exec(n)))throw new Error("invalid format: "+n);var t;return new H({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}F.prototype=H.prototype;function H(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}H.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gn(n){n:for(var t=n.length,r=1,e=-1,a;r<t;++r)switch(n[r]){case".":e=a=r;break;case"0":e===0&&(e=r),a=r;break;default:if(!+n[r])break n;e>0&&(e=0);break}return e>0?n.slice(0,e)+n.slice(a+1):n}var sn;function Un(n,t){var r=z(n,t);if(!r)return n+"";var e=r[0],a=r[1],u=a-(sn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=e.length;return u===o?e:u>o?e+new Array(u-o+1).join("0"):u>0?e.slice(0,u)+"."+e.slice(u):"0."+new Array(1-u).join("0")+z(n,Math.max(0,t+u-1))[0]}function Q(n,t){var r=z(n,t);if(!r)return n+"";var e=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+e:e.length>a+1?e.slice(0,a+1)+"."+e.slice(a+1):e+new Array(a-e.length+2).join("0")}const nn={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:zn,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Q(n*100,t),r:Q,s:Un,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function tn(n){return n}var en=Array.prototype.map,rn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Hn(n){var t=n.grouping===void 0||n.thousands===void 0?tn:Fn(en.call(n.grouping,Number),n.thousands+""),r=n.currency===void 0?"":n.currency[0]+"",e=n.currency===void 0?"":n.currency[1]+"",a=n.decimal===void 0?".":n.decimal+"",u=n.numerals===void 0?tn:_n(en.call(n.numerals,String)),o=n.percent===void 0?"%":n.percent+"",s=n.minus===void 0?"−":n.minus+"",c=n.nan===void 0?"NaN":n.nan+"";function i(l){l=F(l);var f=l.fill,p=l.align,y=l.sign,x=l.symbol,v=l.zero,m=l.width,w=l.comma,g=l.precision,k=l.trim,M=l.type;M==="n"?(w=!0,M="g"):nn[M]||(g===void 0&&(g=12),k=!0,M="g"),(v||f==="0"&&p==="=")&&(v=!0,f="0",p="=");var A=x==="$"?r:x==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",O=x==="$"?e:/[%p]/.test(M)?o:"",E=nn[M],b=/[defgprs%]/.test(M);g=g===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function X(h){var T=A,N=O,D,V,C;if(M==="c")N=E(h)+N,h="";else{h=+h;var $=h<0||1/h<0;if(h=isNaN(h)?c:E(Math.abs(h),g),k&&(h=Gn(h)),$&&+h==0&&y!=="+"&&($=!1),T=($?y==="("?y:s:y==="-"||y==="("?"":y)+T,N=(M==="s"?rn[8+sn/3]:"")+N+($&&y==="("?")":""),b){for(D=-1,V=h.length;++D<V;)if(C=h.charCodeAt(D),48>C||C>57){N=(C===46?a+h.slice(D+1):h.slice(D))+N,h=h.slice(0,D);break}}}w&&!v&&(h=t(h,1/0));var P=T.length+h.length+N.length,S=P<m?new Array(m-P+1).join(f):"";switch(w&&v&&(h=t(S+h,S.length?m-N.length:1/0),S=""),p){case"<":h=T+h+N+S;break;case"=":h=T+S+h+N;break;case"^":h=S.slice(0,P=S.length>>1)+T+h+N+S.slice(P);break;default:h=S+T+h+N;break}return u(h)}return X.toString=function(){return l+""},X}function d(l,f){var p=i((l=F(l),l.type="f",l)),y=Math.max(-8,Math.min(8,Math.floor(L(f)/3)))*3,x=Math.pow(10,-y),v=rn[8+y/3];return function(m){return p(x*m)+v}}return{format:i,formatPrefix:d}}var R,cn,ln;qn({thousands:",",grouping:[3],currency:["$",""]});function qn(n){return R=Hn(n),cn=R.format,ln=R.formatPrefix,R}function Xn(n){return Math.max(0,-L(Math.abs(n)))}function Vn(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(L(t)/3)))*3-L(Math.abs(n)))}function Zn(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,L(t)-L(n))+1}function q(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}const an=Symbol("implicit");function fn(){var n=new J,t=[],r=[],e=an;function a(u){let o=n.get(u);if(o===void 0){if(e!==an)return e;n.set(u,o=t.push(u)-1)}return r[o%r.length]}return a.domain=function(u){if(!arguments.length)return t.slice();t=[],n=new J;for(const o of u)n.has(o)||n.set(o,t.push(o)-1);return a},a.range=function(u){return arguments.length?(r=Array.from(u),a):r.slice()},a.unknown=function(u){return arguments.length?(e=u,a):e},a.copy=function(){return fn(t,r).unknown(e)},q.apply(a,arguments),a}function dn(){var n=fn().unknown(void 0),t=n.domain,r=n.range,e=0,a=1,u,o,s=!1,c=0,i=0,d=.5;delete n.unknown;function l(){var f=t().length,p=a<e,y=p?a:e,x=p?e:a;u=(x-y)/Math.max(1,f-c+i*2),s&&(u=Math.floor(u)),y+=(x-y-u*(f-c))*d,o=u*(1-c),s&&(y=Math.round(y),o=Math.round(o));var v=Ln(f).map(function(m){return y+u*m});return r(p?v.reverse():v)}return n.domain=function(f){return arguments.length?(t(f),l()):t()},n.range=function(f){return arguments.length?([e,a]=f,e=+e,a=+a,l()):[e,a]},n.rangeRound=function(f){return[e,a]=f,e=+e,a=+a,s=!0,l()},n.bandwidth=function(){return o},n.step=function(){return u},n.round=function(f){return arguments.length?(s=!!f,l()):s},n.padding=function(f){return arguments.length?(c=Math.min(1,i=+f),l()):c},n.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),l()):c},n.paddingOuter=function(f){return arguments.length?(i=+f,l()):i},n.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),l()):d},n.copy=function(){return dn(t(),[e,a]).round(s).paddingInner(c).paddingOuter(i).align(d)},q.apply(l(),arguments)}function Wn(n){return function(){return n}}function Jn(n){return+n}var on=[0,1];function I(n){return n}function G(n,t){return(t-=n=+n)?function(r){return(r-n)/t}:Wn(isNaN(t)?NaN:.5)}function Kn(n,t){var r;return n>t&&(r=n,n=t,t=r),function(e){return Math.max(n,Math.min(t,e))}}function Qn(n,t,r){var e=n[0],a=n[1],u=t[0],o=t[1];return a<e?(e=G(a,e),u=r(o,u)):(e=G(e,a),u=r(u,o)),function(s){return u(e(s))}}function nt(n,t,r){var e=Math.min(n.length,t.length)-1,a=new Array(e),u=new Array(e),o=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<e;)a[o]=G(n[o],n[o+1]),u[o]=r(t[o],t[o+1]);return function(s){var c=An(n,s,1,e)-1;return u[c](a[c](s))}}function tt(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function et(){var n=on,t=on,r=U,e,a,u,o=I,s,c,i;function d(){var f=Math.min(n.length,t.length);return o!==I&&(o=Kn(n[0],n[f-1])),s=f>2?nt:Qn,c=i=null,l}function l(f){return f==null||isNaN(f=+f)?u:(c||(c=s(n.map(e),t,r)))(e(o(f)))}return l.invert=function(f){return o(a((i||(i=s(t,n.map(e),_)))(f)))},l.domain=function(f){return arguments.length?(n=Array.from(f,Jn),d()):n.slice()},l.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},l.rangeRound=function(f){return t=Array.from(f),r=jn,d()},l.clamp=function(f){return arguments.length?(o=f?!0:I,d()):o!==I},l.interpolate=function(f){return arguments.length?(r=f,d()):r},l.unknown=function(f){return arguments.length?(u=f,l):u},function(f,p){return e=f,a=p,d()}}function rt(){return et()(I,I)}function at(n,t,r,e){var a=In(n,t,r),u;switch(e=F(e??",f"),e.type){case"s":{var o=Math.max(Math.abs(n),Math.abs(t));return e.precision==null&&!isNaN(u=Vn(a,o))&&(e.precision=u),ln(e,o)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(u=Zn(a,Math.max(Math.abs(n),Math.abs(t))))&&(e.precision=u-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(u=Xn(a))&&(e.precision=u-(e.type==="%")*2);break}}return cn(e)}function it(n){var t=n.domain;return n.ticks=function(r){var e=t();return Dn(e[0],e[e.length-1],r??10)},n.tickFormat=function(r,e){var a=t();return at(a[0],a[a.length-1],r??10,e)},n.nice=function(r){r==null&&(r=10);var e=t(),a=0,u=e.length-1,o=e[a],s=e[u],c,i,d=10;for(s<o&&(i=o,o=s,s=i,i=a,a=u,u=i);d-- >0;){if(i=Y(o,s,r),i===c)return e[a]=o,e[u]=s,t(e);if(i>0)o=Math.floor(o/i)*i,s=Math.ceil(s/i)*i;else if(i<0)o=Math.ceil(o*i)/i,s=Math.floor(s*i)/i;else break;c=i}return n},n}function mn(){var n=rt();return n.copy=function(){return tt(n,mn())},q.apply(n,arguments),it(n)}window.Pusher=gn;window.Echo=new pn({broadcaster:"pusher",key:"51d9687d2d0bffce329a",cluster:"us3",forceTLS:!0,encrypted:!0});let ot=[];async function hn(){try{ot=await window.getCardsAteOTsData()}catch(n){console.error("Error cargando datos para elemento1:",n)}}document.addEventListener("DOMContentLoaded",hn);window.addEventListener("calendar:change",async n=>{await hn()});document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("dashboard-elemento1");if(!n)return;const t=["PENDIENTE","ASIGNADO","PROCESO","ATENDIDO","AUTONOMO","CANCELADO","FINALIZADO"],r={PENDIENTE:{icon:'<span class="material-symbols-outlined text-red-800 text-3xl">pending_actions</span>',color:"from-red-300 to-red-400"},ASIGNADO:{icon:'<span class="material-symbols-outlined text-blue-400 text-3xl">assignment_ind</span>',color:"from-blue-300 to-blue-400"},PROCESO:{icon:'<span class="material-symbols-outlined text-yellow-800 text-3xl">av_timer</span>',color:"from-yellow-300 to-yellow-400"},ATENDIDO:{icon:'<span class="material-symbols-outlined text-green-800 text-3xl">preliminary</span>',color:"from-green-300 to-green-400"},AUTONOMO:{icon:'<span class="material-symbols-outlined text-violet-800 text-3xl">smart_toy</span>',color:"from-violet-300 to-violet-400"},CANCELADO:{icon:'<span class="material-symbols-outlined text-orange-800 text-3xl">dangerous</span>',color:"from-orange-300 to-orange-400"},FINALIZADO:{icon:'<span class="material-symbols-outlined text-blue-800 text-3xl">fact_check</span>',color:"from-blue-300 to-blue-400"}};function e(c){const i={};t.forEach(m=>i[m]=0),c.forEach(m=>{const w=(m.Status||"").toUpperCase();t.includes(w)&&i[w]++});const d=Object.entries(i).map(([m,w])=>({key:m,value:w,color:r[m].color,icon:r[m].icon})).filter(m=>m.value>0).sort((m,w)=>w.value-m.value),l=Math.max(...d.map(m=>m.value),1),f=dn().domain(d.map(m=>m.key)).range([0,100]).padding(.175),p=mn().domain([0,l]).range([0,100]);n.innerHTML=`
         <div class="flex text-2xl font-medium tracking-tight text-gray-950 dark:text-white">Conteo de status
                        de
                        tickets</div>
            <div class="relative w-full h-72"
                style="--marginTop:0px;--marginRight:0px;--marginBottom:16px;--marginLeft:60px;">
                <div class="absolute inset-0 z-10 h-[calc(100%-var(--marginTop)-var(--marginBottom))]
                    translate-y-[var(--marginTop)] w-[calc(100%-var(--marginLeft)-var(--marginRight))]
                    translate-x-[var(--marginLeft)] overflow-visible" id="bar-chart-area"></div>
                <div class="h-[calc(100%-var(--marginTop)-var(--marginBottom))]
                    w-[var(--marginLeft)] translate-y-[var(--marginTop)] overflow-visible" id="bar-chart-yaxis"></div>
            </div>
        `;const y=n.querySelector("#bar-chart-area"),x=n.querySelector("#bar-chart-yaxis");d.forEach((m,w)=>{const g=f(m.key)+f.bandwidth()/2,k=document.createElement("div");k.className="absolute flex items-center gap-1 text-xs text-gray-400 -translate-y-1/2 w-full text-right",k.style.top=`${g}%`,k.style.left="-8px",k.innerHTML=`<span>${m.icon}</span><span>${m.key}</span>`,x.appendChild(k)}),d.forEach((m,w)=>{const g=p(m.value),k=f.bandwidth(),M=f(m.key),A=document.createElement("div");A.className=`absolute bg-gradient-to-b ${m.color} group cursor-pointer transition-all duration-300`,A.style.left="0",A.style.top=`${M}%`,A.style.width=`${g}%`,A.style.height=`${k}%`,A.style.borderRadius="0 8px 8px 0",A.addEventListener("mouseenter",function(E){let b=document.getElementById("bar-tooltip");b||(b=document.createElement("div"),b.id="bar-tooltip",b.className="fixed z-50 px-4 py-2 rounded-lg shadow-lg bg-gray-900 text-white text-xs pointer-events-none",document.body.appendChild(b)),b.innerHTML=`
                    <div class="flex items-center gap-2 mb-1">${m.icon}<span class="font-bold">${m.key}</span></div>
                    <div class="text-gray-300 text-sm">Total: <span class="font-bold">${m.value}</span></div>
                `,b.style.opacity=1,b.style.left=E.clientX+10+"px",b.style.top=E.clientY-10+"px"}),A.addEventListener("mousemove",function(E){const b=document.getElementById("bar-tooltip");b&&(b.style.left=E.clientX+10+"px",b.style.top=E.clientY-10+"px")}),A.addEventListener("mouseleave",function(){const E=document.getElementById("bar-tooltip");E&&(E.style.opacity=0)}),y.appendChild(A);const O=document.createElement("span");O.className="absolute right-2 text-sm font-bold text-gray-900 dark:text-white",O.style.top=`${M+k/2}%`,O.style.transform="translateY(-50%)",O.style.left=`${g}%`,O.innerText=m.value,y.appendChild(O)});const v=document.createElementNS("http://www.w3.org/2000/svg","svg");v.setAttribute("class","absolute h-full w-full pointer-events-none"),v.setAttribute("viewBox","0 0 100 100"),v.setAttribute("preserveAspectRatio","none"),p.ticks(8).forEach(m=>{const w=p(m),g=document.createElementNS("http://www.w3.org/2000/svg","line");g.setAttribute("x1",w),g.setAttribute("x2",w),g.setAttribute("y1","0"),g.setAttribute("y2","100"),g.setAttribute("stroke","#d1d5db"),g.setAttribute("stroke-dasharray","6,5"),g.setAttribute("stroke-width","0.5"),v.appendChild(g)}),y.appendChild(v),p.ticks(4).forEach(m=>{const w=p(m),g=document.createElement("div");g.className="absolute text-xs -translate-x-1/2 tabular-nums text-gray-400",g.style.left=`${w}%`,g.style.top="100%",g.innerText=m,y.appendChild(g)})}function a(){const c=document.getElementById("calendar-month"),i=document.getElementById("calendar-year"),d=document.getElementById("calendar-day"),l=c?parseInt(c.value,10):new Date().getMonth(),f=i?parseInt(i.value,10):new Date().getFullYear(),p=d&&d.value?parseInt(d.value,10):null;return{month:l,year:f,day:p}}function u(c,i,d,l){return c.filter(f=>{if(!f.created_at)return!1;const p=new Date(f.created_at);return!(p.getFullYear()!==i||p.getMonth()!==d||l!==null&&p.getDate()!==l)})}let o=null;function s(){window.getCardsAteOTsData().then(c=>{o=c;const{month:i,year:d,day:l}=a(),f=u(o,d,i,l);e(f)}).catch(()=>{n.innerHTML='<div class="text-red-500 p-4">No se pudo cargar el dashboard.</div>'})}s(),window.Echo&&window.Echo.channel("asignaciones-ot").listen("AsignacionOTCreated",c=>{window.getCardsAteOTsData().then(i=>{o=i.map(x=>(x.Status||x.status)==="SIN_ASIGNAR"?{...x,Status:"ASIGNADO"}:x);const{month:l,year:f,day:p}=a(),y=u(o,f,l,p);e(y)}).catch(()=>{n.innerHTML='<div class="text-red-500 p-4">No se pudo cargar el dashboard.</div>'})}).listen("StatusOTUpdated",()=>s()),window.addEventListener("calendar:change",()=>{if(o){const{month:c,year:i,day:d}=a(),l=u(o,i,c,d);e(l)}}),window.addEventListener("resize",()=>{if(o){const{month:c,year:i,day:d}=a(),l=u(o,i,c,d);e(l)}})});
