let w=[],p=[];async function M(){var b,y;const t=document.getElementById("calendar-month"),a=document.getElementById("calendar-year"),r=document.getElementById("calendar-day");if(!(!t||!a||!r))try{let h=function(e){t.innerHTML="";const n=[...new Set(p.filter(o=>o.year===e).map(o=>o.month))];for(let o=0;o<12;o++)if(n.includes(o)){const v=document.createElement("option");v.value=o,v.textContent=u[o],t.appendChild(v)}},m=function(e,n){r.innerHTML="";const o=document.createElement("option");o.value="",o.textContent="Todos",r.appendChild(o),[...new Set(p.filter(l=>l.year===e&&l.month===n).map(l=>l.day))].sort((l,d)=>l-d).forEach(l=>{const d=document.createElement("option");d.value=l,d.textContent=l,r.appendChild(d)})},c=function(){const e={year:Number(a.value),month:Number(t.value),day:r.value?Number(r.value):null};window.dispatchEvent(new CustomEvent("calendar:change",{detail:e}))};var N=h,f=m,C=c;w=await window.getCardsAteOTsData(),p=w.map(e=>e.created_at).filter(Boolean).map(e=>{const n=new Date(e);return{year:n.getFullYear(),month:n.getMonth(),day:n.getDate()}});const g=[...new Set(p.map(e=>e.year))].sort((e,n)=>e-n);a.innerHTML="",g.forEach(e=>{const n=document.createElement("option");n.value=e,n.textContent=e,a.appendChild(n)});const u=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],E=new Date;let i=E.getFullYear(),s=E.getMonth();[...a.options].some(e=>Number(e.value)===i)||(i=Number((b=a.options[0])==null?void 0:b.value)),h(i),[...t.options].some(e=>Number(e.value)===s)||(s=Number((y=t.options[0])==null?void 0:y.value)),a.value=i,t.value=s,m(i,s),r.value="",c(),a.addEventListener("change",()=>{var e;h(Number(a.value)),t.value=(e=t.options[0])==null?void 0:e.value,m(Number(a.value),Number(t.value)),r.value="",c()}),t.addEventListener("change",()=>{m(Number(a.value),Number(t.value)),r.value="",c()}),r.addEventListener("change",()=>{c()})}catch{const u=new Date;a.innerHTML=`<option value="${u.getFullYear()}">${u.getFullYear()}</option>`,t.innerHTML=`<option value="${u.getMonth()}">${["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][u.getMonth()]}</option>`,r.innerHTML='<option value="">Todos</option>',window.dispatchEvent(new Event("calendar:change"))}}document.addEventListener("DOMContentLoaded",M);
